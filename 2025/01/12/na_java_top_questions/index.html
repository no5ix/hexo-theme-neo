<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">

<script>
    (function(){
        if('0622'){
          const hostname = window.location.hostname;
          if (!(hostname === "localhost" || hostname === "127.0.0.1" || hostname === "::1")) {
            // console.log("The website is not running on localhost.");
            // alert('此文章并不公开, 输入文章密码方可阅读');
            var password = prompt('此文章并不公开, 输入文章密码方可阅读');
            if (password !== '0622'){
              if (password != null) // 如果用户点击了确认而且密码错误的时候, 因为当password == null的时候说明用户点了取消
              {
                alert('Error!');
              }
              if (history.length > 1)
              {
                history.back();
              }
              else
              {
                window.location.href = "about:blank";
              }
            }
          }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/dist/jquery.fancybox.css?v=3.2.10" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="noodle,NA,Java,">








  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.2">






<meta name="description" content="ReferenceLittle Dinosaur website, The numbers in this article are based on the numbers on this website. . . .">
<meta name="keywords" content="noodle,NA,Java">
<meta property="og:type" content="article">
<meta property="og:title" content="NA Java Top Questions">
<meta property="og:url" content="https://hulinhong.com/2025/01/12/na_java_top_questions/index.html">
<meta property="og:site_name" content="烫">
<meta property="og:description" content="ReferenceLittle Dinosaur website, The numbers in this article are based on the numbers on this website. . . .">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://hulinhong.com/img/java_top_questions/image.png">
<meta property="og:updated_time" content="2025-01-22T08:58:48.366Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NA Java Top Questions">
<meta name="twitter:description" content="ReferenceLittle Dinosaur website, The numbers in this article are based on the numbers on this website. . . .">
<meta name="twitter:image" content="https://hulinhong.com/img/java_top_questions/image.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"scrollpercent":true,"onmobile":true,"dimmer":true,"body_content_height":0,"display_duration":150},
    local_search: {"enable":true,"trigger":"auto","top_n_per_article":1},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"duration":222,"transition":{"header":"slideDownIn","menu":"slideDownIn","logo":"slideDownIn","post_block_else":"slideDownIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"slideDownIn","footer":"slideDownIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>








  <title>NA Java Top Questions | 烫</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">烫</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">烫烫烫烫烫</p>
      
  </div>

  <div class="menu-item sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div class="menu-item site-search">
    
  
  <form class="site-search-form">
    <span class="search-icon fa fa-search"></span>
    <input type="text" id="local-search-input" class="st-search-input">
    <i id="local-search-close">×</i>
  </form>


<script type="text/javascript" id="local.search.active">
var inputArea       = document.querySelector("#local-search-input");
inputArea.onclick   = function(){ getSearchFile(); this.onclick = null }
inputArea.onkeydown = function(){ if(event.keyCode == 13) return false }
</script>



  </div>
  <div id="local-search-result-pc" class="local-search-result-cls"></div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      

       
    </ul>
  

  
    
  
</nav>



 </div>
    </header>

    <div id="local-search-result-mobile" class="local-search-result-cls"></div>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hulinhong.com/2025/01/12/na_java_top_questions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Wasp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="烫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">NA Java Top Questions</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2025-01-12T23:36:08+00:00">
                2025-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            <div class="post-tags">
              
                <a href="/tags/noodle/" rel="tag"><i class="fa fa-tag"></i> noodle</a>
              
                <a href="/tags/NA/" rel="tag"><i class="fa fa-tag"></i> NA</a>
              
                <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
              
            </div>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    




    
    
    
    <div class="post-body" itemprop="articleBody">
      
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2024/12/30/eng_youtube_indian_top_view_of_binary_tree/" rel="next" title="YT Indian Accent Top View of Binary Tree">
                <i class="fa fa-chevron-left"></i> 
                <p class="post-nav-pre-next-title">
                  YT Indian Accent Top View of Binary Tree
                </p> 
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2025/01/18/na_word_list/" rel="prev" title="NA word list">
              <p class="post-nav-pre-next-title">
                  NA word list
              </p> 
              <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

      
      

      
        <h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://zihan1997.github.io/presentation/interview_questions/" target="_blank" rel="noopener">Little Dinosaur website</a>, The numbers in this article are based on the numbers on this website.</p>
<p><strong>. . .</strong><a id="more"></a></p>
<h1 id="IDs-Questions-Map"><a href="#IDs-Questions-Map" class="headerlink" title="IDs Questions Map"></a>IDs Questions Map</h1><ul>
<li>“id”: 43, “question”: “Abstract class vs. Interface. When to use abstract class and when to use interface?”,</li>
<li>“id”: 44, “question”: “New feature of Java 8. Give an example of how you use them in your project”,</li>
<li>“id”: 45, “question”: “Comparable vs. Comparator”,</li>
<li>“id”: 46, “question”: “Types of Exceptions and how do you deal with exceptions in your project?”,</li>
<li>“id”: 47, “question”: “Generics and how do you use generics in your project?”,</li>
<li>“id”: 48, “question”: “Java OOP 4 principles, and explain each of them”,</li>
<li>“id”: 49, “question”: “If java 8 allows default method in interface, so what is the real difference between interface and abstract class?”,</li>
<li>“id”: 52, “question”: “Serialization, What is Serializable and SerialVersionUID?”,</li>
<li>“id”: 53, “question”: “HashMap: how does it work internally, what is hash collision”,</li>
<li>“id”: 59, “question”: “What is the Functional Interface? Java 8 built in functional interface?”,</li>
<li>“id”: 62, “question”: “HashTable vs. HashMap”,</li>
<li>“id”: 67, “question”: “Implement a singleton”,</li>
<li>“id”: 68, “question”: “Do you know about the Executor Service and Future?”,</li>
<li>“id”: 69, “question”: “Explain the Factory design pattern”,</li>
<li>“id”: 70, “question”: “What design patterns did you worked on before?”,</li>
<li>“id”: 71, “question”: “How to custom an Exception?”,</li>
<li>“id”: 72, “question”: “OutOfMemoryError vs StackOverflowError vs Memory Leak”,</li>
<li>“id”: 75, “question”: “java 8: Different types of \”method reference\””,</li>
<li>“id”: 78, “question”: “What is Optional?”,</li>
<li>“id”: 90, “question”: “ArrayList vs LinkedList, which one to choose?”,</li>
<li>“id”: 91, “question”: “How does Java class loader work?”,</li>
<li>“id”: 92, “question”: “Java 8: Intermediate operator and terminal operator in stream api”,</li>
<li>“id”: 95, “question”: “How do you create a thread?”,</li>
<li>“id”: 98, “question”: “How does arraylist work internally?”,</li>
<li>“id”: 104, “question”: “How does thread communicate/interact/share data with each other?”,</li>
<li>“id”: 106, “question”: “What are the meaning of thread methods: join, wait, sleep, yield”,</li>
<li>“id”: 113, “question”: “Shallow copy vs. Deep copy”,</li>
<li>“id”: 115, “question”: “How does ConcurrentHashMap works?”,</li>
<li>“id”: 117, “question”: “What is ConcurrentModificationException and how to handle it?”,</li>
<li>“id”: 118, “question”: “Relationship between equals() and hashcode()”,</li>
<li>“id”: 119, “question”: “How to make class immutable?”,</li>
<li>“id”: 121, “question”: “What is the deadlock? How to FIND it? How to avoid it?”,</li>
<li>“id”: 127, “question”: “Difference between HashSet and TreeSet, HashMap and TreeMap”,</li>
<li>“id”: 131, “question”: “When implements Serializable, what if you don’t define the serialVersionUID? What if you remove it?”,</li>
<li>“id”: 132, “question”: “What is fail-fast and fail-safe?”,</li>
<li>“id”: 135, “question”: “Map vs. FlatMap”,</li>
<li>“id”: 138, “question”: “HashMap vs LinkedHashMap and HashSet vs LinkedHashSet”,</li>
<li>“id”: 139, “question”: “why using static and why not?”,</li>
<li>“id”: 163, “question”: “what is SOLID principle?”,</li>
<li>“id”: 295, “question”: “How to make a global count in multithreading environment”,</li>
<li>“id”: 296, “question”: “Difference: Synchronized, ThreadLocal, Volatile, AtomicInteger”,</li>
<li>“id”: 303, “question”: “How does string works? Why is String immutable in Java?”,</li>
<li>“id”: 310, “question”: “What’s Garbage collection types and Whats new in java 8? “,</li>
<li>“id”: 321, “question”: “Java switch statement has too many cases, how to improve it”,</li>
<li>“id”: 330, “question”: “New features in java 11  and 17”,</li>
<li>“id”: 332, “question”: “Difference: Sleep and Wait”,</li>
<li>“id”: 343, “question”: “Suppose when you have Employee class to store data, when do you use list or map”,</li>
<li>“id”: 344, “question”: “Difference: Arraylist vs LinkedList, when to use which”,</li>
<li>“id”: 363, “question”: “Difference runnable vs callable”,</li>
<li>“id”: 364, “question”: “Difference future vs completableFuture”,</li>
<li>“id”: 371, “question”: “JDK vs JRE vs JVM”,</li>
<li>“id”: 372, “question”: “What is externalization and its difference with serialization”,</li>
<li>“id”: 373, “question”: “How do you implement a deadlock”,</li>
<li>“id”: 374, “question”: “Synchronized method vs Synchronized block”,</li>
<li>“id”: 375, “question”: “Difference between Iterator and Enumeration”,</li>
<li>“id”: 448, “question”: “What is proxy design pattern”,</li>
</ul>
<h1 id="46-Types-of-Exceptions"><a href="#46-Types-of-Exceptions" class="headerlink" title="46-Types of Exceptions"></a>46-Types of Exceptions</h1><p><img src="/img/java_top_questions/image.png" alt="Exception"></p>
<ul>
<li><p>Java Exception hierarchy:</p>
<ul>
<li><p>throwable</p>
<ul>
<li>error<ul>
<li>error is like system error which can NOT be handled by program, like OutOfMemoryError, StackOverflowError etc.</li>
</ul>
</li>
<li><p>exception.</p>
<ul>
<li><p>Exception – compile/checked exception + runtime/unchecked exception. Checked exception can be handled using try catch block, like the SQLException, Thread InterrupttedException; Unchecked exception happens in runtime, like NullPointerException, IndexOutOfBoundException etc.</p>
</li>
<li><p>self defined exception: Just extend the java Exception class and define your own constructor and message</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>How to deal with exception<ul>
<li>Java: use Try/Catch/Finally block or use Throws on method level.</li>
<li>Spring: use @ExceptionHandler @ControllerAdvice on the controller level to catch exception in whole application</li>
</ul>
</li>
</ul>
<h1 id="43-Abstract-class-vs-Interface"><a href="#43-Abstract-class-vs-Interface" class="headerlink" title="43-Abstract class vs. Interface"></a>43-Abstract class vs. Interface</h1><p>Difference Between Interface and Abstract Class in Java</p>
<blockquote>
<p>In Java, interfaces and abstract classes are both used to define templates or contracts for other classes, but they have distinct purposes and characteristics. Below is a comparison with examples to clarify their differences.</p>
</blockquote>
<p>Key Differences</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Interface</th>
<th>Abstract Class</th>
</tr>
</thead>
<tbody>
<tr>
<td>Keyword</td>
<td>interface</td>
<td>abstract</td>
</tr>
<tr>
<td>Inheritance</td>
<td>A class can implement multiple interfaces.</td>
<td>A class can extend only one abstract class.</td>
</tr>
<tr>
<td>Method</td>
<td>Implementation    Methods are abstract by default (except <code>default</code> methods, which can have implementations).</td>
<td>Can contain both abstract and concrete (regular) methods.</td>
</tr>
<tr>
<td>Fields</td>
<td>Can only have <code>public</code> <code>static</code> <code>final</code> constants.</td>
<td>Can have instance variables.</td>
</tr>
<tr>
<td>Constructors</td>
<td>Not allowed.</td>
<td>Can have constructors.</td>
</tr>
<tr>
<td>Default Access Level</td>
<td>Methods are implicitly <code>public</code>.</td>
<td>Methods can have <code>public</code>, <code>protected</code>, or <code>package-private</code> access.</td>
</tr>
<tr>
<td>Use Case</td>
<td>Defines a contract or capability.</td>
<td>Defines shared characteristics or behavior.</td>
</tr>
</tbody>
</table>
<p>Example 1: Using an Interface</p>
<blockquote>
<p>An interface is used to define a set of behaviors (a contract) that a class must implement.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Define an interface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;  <span class="comment">// Abstract method</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span></span>;  <span class="comment">// Abstract method</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Implement the interface</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Dog eats bones."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Dog sleeps in its kennel."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Animal myDog = <span class="keyword">new</span> Dog();</span><br><span class="line">        myDog.eat();   <span class="comment">// Output: Dog eats bones.</span></span><br><span class="line">        myDog.sleep(); <span class="comment">// Output: Dog sleeps in its kennel.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Example 2: Using an Abstract Class</p>
<blockquote>
<p>An abstract class is used when you want to share common code among related classes while still requiring subclasses to provide specific implementations.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Define an abstract class</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>; <span class="comment">// Abstract method</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span> </span>&#123;       <span class="comment">// Concrete method</span></span><br><span class="line">        System.out.println(<span class="string">"Animal is sleeping."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Extend the abstract class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Cat eats fish."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Animal myCat = <span class="keyword">new</span> Cat();</span><br><span class="line">        myCat.eat();   <span class="comment">// Output: Cat eats fish.</span></span><br><span class="line">        myCat.sleep(); <span class="comment">// Output: Animal is sleeping.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>When to Use: </p>
<ul>
<li>Interface:<ul>
<li>Use an interface to define a set of behaviors or capabilities that a class must adhere to, without concerning how they are implemented.</li>
<li>Example: The Runnable interface defines the ability to be run in a thread.</li>
</ul>
</li>
<li>Abstract Class:<ul>
<li>Use an abstract class to represent shared characteristics or behavior while allowing subclasses to override specific parts.</li>
<li>Example: The HttpServlet abstract class provides a framework for handling HTTP requests while letting you implement methods like doGet() or doPost().</li>
</ul>
</li>
</ul>
<h1 id="44-New-feature-of-Java-8"><a href="#44-New-feature-of-Java-8" class="headerlink" title="44-New feature of Java 8"></a>44-New feature of Java 8</h1><p>Java 8 has several new features. Here are some of them along with examples of how they can be used in a project:</p>
<h2 id="Lambda-Expressions"><a href="#Lambda-Expressions" class="headerlink" title="Lambda Expressions"></a>Lambda Expressions</h2><p>Lambda expressions enable a more concise way to represent code blocks that can be passed to methods or stored in variables.</p>
<p>Example: In an e-commerce project, filtering a list of products by price. Suppose there is a <code>Product</code> class with a <code>price</code> field.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">(<span class="keyword">double</span> price, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Product&gt; products = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        products.add(<span class="keyword">new</span> Product(<span class="number">100</span>, <span class="string">"Product1"</span>));</span><br><span class="line">        products.add(<span class="keyword">new</span> Product(<span class="number">200</span>, <span class="string">"Product2"</span>));</span><br><span class="line">        products.add(<span class="keyword">new</span> Product(<span class="number">150</span>, <span class="string">"Product3"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use Lambda expression to filter products with price greater than 150</span></span><br><span class="line">        List&lt;Product&gt; filteredProducts = products.stream()</span><br><span class="line">             .filter(product -&gt; product.getPrice() &gt; <span class="number">150</span>)</span><br><span class="line">             .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        filteredProducts.forEach(product -&gt; System.out.println(product.getPrice()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Method-References"><a href="#Method-References" class="headerlink" title="Method References"></a>Method References</h2><p>Method references provide a more concise way to refer to existing methods.</p>
<p>Example: In a logging project, there is a <code>Logger</code> class with a <code>logMessage</code> method for logging messages.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">logMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Logging: "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; messages = Arrays.asList(<span class="string">"Message1"</span>, <span class="string">"Message2"</span>, <span class="string">"Message3"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use method reference to apply the logging method to each message</span></span><br><span class="line">        messages.forEach(Logger::logMessage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Stream-API"><a href="#Stream-API" class="headerlink" title="Stream API"></a>Stream API</h2><p>The Stream API is used for performing functional operations on collections, such as filtering, mapping, and reducing.</p>
<p>Example: In a data analysis project, calculating the total salary of employees. Suppose there is an <code>Employee</code> class with a <code>salary</code> field.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> salary;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Employee&gt; employees = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        employees.add(<span class="keyword">new</span> Employee(<span class="number">5000</span>));</span><br><span class="line">        employees.add(<span class="keyword">new</span> Employee(<span class="number">6000</span>));</span><br><span class="line">        employees.add(<span class="keyword">new</span> Employee(<span class="number">7000</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use Stream API to calculate the total salary of employees</span></span><br><span class="line">        <span class="keyword">double</span> totalSalary = employees.stream()</span><br><span class="line">             .mapToDouble(Employee::getSalary)</span><br><span class="line">             .sum();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"Total salary: "</span> + totalSalary);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Optional-Class"><a href="#Optional-Class" class="headerlink" title="Optional Class"></a>Optional Class</h2><p>The Optional class is used to solve the problem of null pointer exceptions and handle potentially null values more gracefully.</p>
<p>Example: In a user management system, getting a user’s email address. Suppose the <code>User</code> class has a <code>getEmail</code> method that might return <code>null</code>.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="string">"example@example.com"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use Optional class to safely get the user's email address</span></span><br><span class="line">        Optional&lt;String&gt; emailOptional = Optional.ofNullable(user.getEmail());</span><br><span class="line">        String email = emailOptional.orElse(<span class="string">"default@example.com"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"Email: "</span> + email);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="67-Implement-a-singleton"><a href="#67-Implement-a-singleton" class="headerlink" title="67-Implement a singleton"></a>67-Implement a singleton</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">implements</span> <span class="title">Cloneable</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> CloneNotSupportedException(<span class="string">"Cloning of Singleton is not allowed."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">readResolve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here is the explanation of this Java code in English:</p>
<ol>
<li>Package Import:<ul>
<li><code>import java.io.Serializable;</code>: Imports the <code>Serializable</code> interface, which is used to mark a class as serializable, meaning that objects of this class can be converted into a byte stream for storage or transmission.<ul>
<li>In a <code>Singleton</code> class, implementing the <code>Serializable</code> interface is to ensure that the Singleton pattern remains a singleton during serialization and deserialization.</li>
<li>If there is no <code>readResolve</code> method, a new object will be created during deserialization, which will break the Singleton pattern. Because the deserialization mechanism will create a new object through reflection instead of using the existing singleton instance.</li>
<li>When there is a <code>readResolve</code> method, during deserialization, the <code>readResolve</code> method will be called and it returns the singleton instance (obtained through the <code>getInstance</code> method), thus ensuring that the same singleton object is obtained after serialization and deserialization.</li>
<li>If the serialization - related content is not handled properly, multiple “singleton” objects may appear during deserialization, which violates the original intention of the Singleton pattern design. For example, suppose there is no <code>readResolve</code> method, each deserialization will create a new <code>Singleton</code> object instead of reusing the existing singleton object.</li>
</ul>
</li>
</ul>
</li>
<li>Class Definition:<ul>
<li><code>public class Singleton implements Cloneable, Serializable</code>: Defines a public class named <code>Singleton</code> that implements the <code>Cloneable</code> interface and the <code>Serializable</code> interface. Implementing the <code>Cloneable</code> interface usually indicates that objects of this class can be cloned (although in this example, the <code>clone</code> method is overridden to disallow cloning), and implementing the <code>Serializable</code> interface indicates that objects of this class can be serialized.</li>
</ul>
</li>
<li>Static Member Variable:<ul>
<li><code>private static volatile Singleton instance;</code>: Defines a private static variable <code>instance</code> of type <code>Singleton</code>. The <code>volatile</code> keyword is used to ensure thread-safe access to the variable in a multi-threaded environment. This prevents certain visibility and reordering issues that can occur in a multi-threaded context, making sure that changes made by one thread are visible to other threads immediately.</li>
</ul>
</li>
<li>Private Constructor:<ul>
<li><code>private Singleton() {}</code>: Declares a private constructor. This ensures that the <code>Singleton</code> class cannot be instantiated directly from outside the class. This is a common practice in implementing the Singleton design pattern, as it restricts the creation of <code>Singleton</code> objects to within the class itself.</li>
</ul>
</li>
<li>Static Method to Get Instance:<ul>
<li><code>public static Singleton getInstance() {... }</code>: Defines a public static method <code>getInstance</code> which is used to obtain the single instance of the <code>Singleton</code> class.<ul>
<li><code>if (instance == null) {... }</code>: Checks if the <code>instance</code> variable is <code>null</code>. If it is, then the code enters the synchronized block.</li>
<li><code>synchronized (Singleton.class) {... }</code>: Uses a synchronized block with the <code>Singleton.class</code> object as the lock. This ensures that only one thread can execute the code inside the block at a time, preventing multiple threads from creating multiple instances of the <code>Singleton</code> class.</li>
<li><code>if (instance == null) { instance = new Singleton(); }</code>: Inside the synchronized block, the code checks again if <code>instance</code> is <code>null</code> (this is known as double-checked locking) before creating a new instance of <code>Singleton</code>. This is done to avoid unnecessary synchronization overhead. Once the instance is created, subsequent calls to <code>getInstance</code> will simply return the already created instance.</li>
</ul>
</li>
</ul>
</li>
<li>Clone Method Override:<ul>
<li><code>@Override protected Object clone() throws CloneNotSupportedException {... }</code>: Overrides the <code>clone</code> method from the <code>Cloneable</code> interface. Here, it throws a <code>CloneNotSupportedException</code> with a message indicating that cloning of the <code>Singleton</code> object is not allowed. This is done to maintain the Singleton property, as we do not want multiple instances created through cloning.</li>
</ul>
</li>
<li>Read Resolve Method:<ul>
<li><code>protected Object readResolve() { return getInstance(); }</code>: The <code>readResolve</code> method is used during deserialization. When an object is deserialized, this method is called. Here, it returns the instance obtained from the <code>getInstance</code> method, ensuring that deserialization does not break the Singleton property. Instead of creating a new instance during deserialization, it returns the existing singleton instance, thus maintaining the Singleton guarantee.</li>
</ul>
</li>
</ol>
<p>In summary, this code implements the Singleton design pattern in Java, which ensures that only one instance of the <code>Singleton</code> class exists throughout the application. It uses double-checked locking for thread-safe lazy initialization of the instance, prevents cloning, and ensures that deserialization returns the existing singleton instance rather than creating a new one. This is a common and robust way of implementing the Singleton pattern in Java, taking into account thread safety and serialization issues.</p>
<h1 id="68-364-Executor-Service-and-Future-and-CompletableFuture"><a href="#68-364-Executor-Service-and-Future-and-CompletableFuture" class="headerlink" title="68-364-Executor Service and Future and CompletableFuture"></a>68-364-Executor Service and Future and CompletableFuture</h1><p>Benefits of using Executor Service and Future:</p>
<ul>
<li>Resource Management: <code>ExecutorService</code> manages threads efficiently, reducing the overhead of thread creation and destruction.</li>
<li>Asynchronous Execution: Allows tasks to be executed in parallel, improving the performance of applications by leveraging multiple threads.</li>
<li>Result Handling: <code>Future</code> provides a way to handle the results of asynchronous tasks, including waiting for the result, checking if the task is completed, and handling exceptions.</li>
</ul>
<p>In summary, <code>ExecutorService</code> simplifies thread management and task execution, while <code>Future</code> provides a mechanism to interact with the results of asynchronous tasks. Together, they are powerful tools for writing concurrent and asynchronous Java programs, helping to improve performance and code readability.</p>
<h2 id="Executor-Service"><a href="#Executor-Service" class="headerlink" title="Executor Service"></a>Executor Service</h2><ul>
<li>The <code>ExecutorService</code> is an interface in Java that provides a higher-level abstraction for executing tasks asynchronously compared to using raw threads. It is part of the <code>java.util.concurrent</code> package.</li>
<li>It manages a pool of threads, which can be used to execute <code>Runnable</code> or <code>Callable</code> tasks. By using an <code>ExecutorService</code>, you don’t have to deal with the low-level details of thread creation, management, and destruction.</li>
<li>You can submit tasks to the <code>ExecutorService</code>, and it will handle scheduling and execution of those tasks using its thread pool.</li>
<li>Some commonly used implementations of <code>ExecutorService</code> include <code>ThreadPoolExecutor</code> and <code>ScheduledThreadPoolExecutor</code>.</li>
<li><p>Example of creating an <code>ExecutorService</code>:</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExecutorServiceExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Creates a fixed-size thread pool with 5 threads</span></span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// Submits a Runnable task</span></span><br><span class="line">        executorService.execute(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">"Task executed by thread: "</span> + Thread.currentThread().getName());</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// Shuts down the executor service after all tasks are completed</span></span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  In the code above:</p>
<ul>
<li><code>Executors.newFixedThreadPool(5)</code> creates a fixed-size thread pool with 5 threads.</li>
<li><code>executorService.execute()</code> submits a <code>Runnable</code> task to the executor service for execution. The <code>Runnable</code> task is defined using a lambda expression, which simply prints the name of the thread that executes the task.</li>
<li><code>executorService.shutdown()</code> shuts down the executor service after all submitted tasks have completed.</li>
</ul>
</li>
</ul>
<h2 id="Future"><a href="#Future" class="headerlink" title="Future"></a>Future</h2><ul>
<li>The <code>Future</code> interface represents the result of an asynchronous computation. It is used in conjunction with <code>ExecutorService</code> when you submit a <code>Callable</code> task.</li>
<li>A <code>Callable</code> is similar to a <code>Runnable</code>, but it can return a result and throw an exception.</li>
<li>When you submit a <code>Callable</code> to an <code>ExecutorService</code>, it returns a <code>Future</code> object, which you can use to check if the computation is done, wait for the computation to complete, and retrieve the result of the computation.</li>
<li><p>Example of using <code>Future</code> with <code>ExecutorService</code>:</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FutureExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">// Submits a Callable task</span></span><br><span class="line">        Future&lt;Integer&gt; future = executorService.submit(<span class="keyword">new</span> Callable&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                <span class="comment">// Simulates some computation</span></span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Waits for the task to complete and gets the result</span></span><br><span class="line">            Integer result = future.get();</span><br><span class="line">            System.out.println(<span class="string">"Result: "</span> + result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException | ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  In the code above:</p>
<ul>
<li><code>executorService.submit()</code> is used to submit a <code>Callable&lt;Integer&gt;</code> task. The <code>Callable</code> task simulates some computation (in this case, it sleeps for 2 seconds and then returns the value 42).</li>
<li><code>future.get()</code> blocks the calling thread until the computation is completed and returns the result. If the computation throws an exception, it will be wrapped in an <code>ExecutionException</code>.</li>
<li><code>InterruptedException</code> is thrown if the waiting thread is interrupted while waiting for the result.</li>
</ul>
</li>
</ul>
<h2 id="CompletableFuture"><a href="#CompletableFuture" class="headerlink" title="CompletableFuture"></a>CompletableFuture</h2><ul>
<li><p>Enhanced Functionality:</p>
<ul>
<li><code>CompletableFuture</code> is introduced in Java 8. It implements <code>Future</code> and provides additional functionality for chaining asynchronous operations, combining multiple futures, and handling exceptions.</li>
<li><p>It allows you to perform actions upon completion, combine multiple futures, and transform results.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompletableFutureExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</span><br><span class="line">        CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// Simulate a long-running task</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do other work while the future is being computed</span></span><br><span class="line">        System.out.println(<span class="string">"Doing other work..."</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Chain another action upon completion</span></span><br><span class="line">        CompletableFuture&lt;String&gt; resultFuture = future.thenApply(result -&gt; <span class="string">"Result: "</span> + result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Block until the final result is available</span></span><br><span class="line">        String result = resultFuture.get();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="comment">/* result print:</span></span><br><span class="line"><span class="comment">            Doing other work...</span></span><br><span class="line"><span class="comment">            Result: 42</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>CompletableFuture.supplyAsync(() -&gt; {... });</code>: Creates a <code>CompletableFuture</code> that runs the given task asynchronously.</li>
<li><code>future.thenApply(result -&gt; &quot;Result: &quot; + result);</code>: Chains another action to the <code>CompletableFuture</code>.</li>
<li><code>resultFuture.get();</code>: Blocks until the final result is available.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="Key-Differences"><a href="#Key-Differences" class="headerlink" title="Key Differences"></a>Key Differences</h2><ul>
<li>Chaining and Composing:<ul>
<li>Future: Does not support chaining or combining multiple asynchronous tasks.</li>
<li>CompletableFuture: Allows chaining of operations using methods like <code>thenApply</code>, <code>thenCompose</code>, <code>thenCombine</code>, etc., enabling functional composition of asynchronous tasks.</li>
</ul>
</li>
<li>Exception Handling:<ul>
<li>Future: Limited to <code>get()</code> which throws checked exceptions.</li>
<li>CompletableFuture: Provides methods like <code>exceptionally</code> and <code>handle</code> for better exception handling in asynchronous tasks.</li>
</ul>
</li>
<li>Completion Control:<ul>
<li>Future: You have to wait for the future to complete using <code>get()</code>.</li>
<li>CompletableFuture: Allows you to complete the future manually using <code>complete()</code> or <code>completeExceptionally()</code>.</li>
</ul>
</li>
</ul>
<h2 id="Best-Practices"><a href="#Best-Practices" class="headerlink" title="Best Practices"></a>Best Practices</h2><ul>
<li>Use Future: For simple asynchronous tasks where you only need to wait for a result.</li>
<li>Use CompletableFuture: For complex asynchronous workflows, combining multiple tasks, and performing operations upon completion of tasks.<ul>
<li>By using <code>CompletableFuture</code>, you can write more readable and powerful asynchronous code, leveraging the functional programming features of Java 8 and later.</li>
</ul>
</li>
</ul>
<h1 id="70-Factory-Pattern"><a href="#70-Factory-Pattern" class="headerlink" title="70-Factory Pattern"></a>70-Factory Pattern</h1><ul>
<li>Factory Pattern<ul>
<li>This factory pattern allows you to create objects without exposing the instantiation logic to the client. The client only needs to interact with the <code>ProductFactory</code> and provide the product type, and the factory takes care of creating the appropriate product. This promotes loose coupling and makes the code more modular and maintainable.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Product interface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Product A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductA</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"This is ConcreteProductA"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Product B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductB</span> <span class="keyword">implements</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"This is ConcreteProductB"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Factory class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">(String productType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (productType.equalsIgnoreCase(<span class="string">"A"</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProductA();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (productType.equalsIgnoreCase(<span class="string">"B"</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProductB();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Invalid product type: "</span> + productType);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Main class to demonstrate the factory pattern</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FactoryPatternExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ProductFactory factory = <span class="keyword">new</span> ProductFactory();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Create product A</span></span><br><span class="line">        Product productA = factory.createProduct(<span class="string">"A"</span>);</span><br><span class="line">        productA.show();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Create product B</span></span><br><span class="line">        Product productB = factory.createProduct(<span class="string">"B"</span>);</span><br><span class="line">        productB.show();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Try to create an invalid product</span></span><br><span class="line">            Product invalidProduct = factory.createProduct(<span class="string">"C"</span>);</span><br><span class="line">            invalidProduct.show();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalArgumentException e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h1 id="70-Obeserver-Pattern"><a href="#70-Obeserver-Pattern" class="headerlink" title="70-Obeserver Pattern"></a>70-Obeserver Pattern</h1><ul>
<li>Observer Pattern<ul>
<li>This code demonstrates the Observer Pattern, which allows a subject to maintain a list of observers and notify them of any state changes. It promotes loose coupling between the subject and the observers, making it easy to add or remove observers without modifying the subject’s code.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Observer interface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(String message)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Subject interface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">attach</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">detach</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">(String message)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Subject</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteSubject</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Observer&gt; observers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attach</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">        observers.add(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">detach</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">        observers.remove(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Observer observer : observers) &#123;</span><br><span class="line">            observer.update(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Observer A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserverA</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ConcreteObserverA received message: "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Concrete Observer B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserverB</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ConcreteObserverB received message: "</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Main class to demonstrate the Observer Pattern</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObserverPatternExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Create subject</span></span><br><span class="line">        ConcreteSubject subject = <span class="keyword">new</span> ConcreteSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Create observers</span></span><br><span class="line">        Observer observerA = <span class="keyword">new</span> ConcreteObserverA();</span><br><span class="line">        Observer observerB = <span class="keyword">new</span> ConcreteObserverB();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Attach observers to the subject</span></span><br><span class="line">        subject.attach(observerA);</span><br><span class="line">        subject.attach(observerB);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Notify observers</span></span><br><span class="line">        subject.notifyObservers(<span class="string">"Hello, Observers!"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Detach one observer</span></span><br><span class="line">        subject.detach(observerB);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Notify remaining observer</span></span><br><span class="line">        subject.notifyObservers(<span class="string">"Goodbye, Observers!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h1 id="448-Proxy-Pattern"><a href="#448-Proxy-Pattern" class="headerlink" title="448-Proxy Pattern"></a>448-Proxy Pattern</h1><p>The Proxy Design Pattern is a structural design pattern that provides a surrogate or placeholder for another object to control access to it. It is used to control access to the real object, add additional functionality, or provide a more efficient way of accessing the object. Here’s a detailed explanation:</p>
<h2 id="Structure-of-Proxy-Design-Pattern"><a href="#Structure-of-Proxy-Design-Pattern" class="headerlink" title="Structure of Proxy Design Pattern"></a>Structure of Proxy Design Pattern</h2><ul>
<li>Subject: This is an interface that defines the common interface for the RealSubject and Proxy.</li>
<li>RealSubject: This is the actual object that the proxy represents.</li>
<li>Proxy: This is the object that controls access to the RealSubject. It has a reference to the RealSubject and implements the Subject interface.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Image</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RealImage</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fileName = fileName;</span><br><span class="line">        loadFromDisk();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loadFromDisk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Loading "</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Displaying "</span> + fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyImage</span> <span class="keyword">implements</span> <span class="title">Image</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> RealImage realImage;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String fileName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyImage</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.fileName = fileName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (realImage == <span class="keyword">null</span>) &#123;</span><br><span class="line">            realImage = <span class="keyword">new</span> RealImage(fileName);</span><br><span class="line">        &#125;</span><br><span class="line">        realImage.display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Explanation:</p>
<ol>
<li>Interface <code>Image</code>:<ul>
<li><code>interface Image</code> defines the <code>display()</code> method that both <code>RealImage</code> and <code>ProxyImage</code> will implement.</li>
</ul>
</li>
<li>RealSubject <code>RealImage</code>:<ul>
<li><code>RealImage</code> implements <code>Image</code>.</li>
<li>The <code>RealImage</code> constructor loads the image from disk when an instance is created.</li>
<li>The <code>display()</code> method displays the image.</li>
</ul>
</li>
<li>Proxy <code>ProxyImage</code>:<ul>
<li><code>ProxyImage</code> also implements <code>Image</code>.</li>
<li><code>ProxyImage</code> holds a reference to <code>RealImage</code>.</li>
<li>In the <code>display()</code> method of <code>ProxyImage</code>, if <code>realImage</code> is not instantiated, it creates a <code>RealImage</code> instance.</li>
<li>Then, it calls the <code>display()</code> method of <code>RealImage</code>.</li>
</ul>
</li>
</ol>
<h2 id="Use-Cases"><a href="#Use-Cases" class="headerlink" title="Use Cases"></a>Use Cases</h2><ul>
<li>Remote Proxy: Used to represent an object that exists in a different address space, like a remote object in a distributed system.</li>
<li>Virtual Proxy: Used to create expensive objects on demand. For example, loading images only when they are needed to be displayed.</li>
<li>Protection Proxy: Used to control access to the real object, providing authentication or authorization.</li>
</ul>
<h2 id="Benefits"><a href="#Benefits" class="headerlink" title="Benefits"></a>Benefits</h2><ul>
<li>Lazy Loading: Objects can be loaded only when they are needed, improving performance.</li>
<li>Access Control: Provides a way to control access to the real object, adding security or authorization.</li>
<li>Enhanced Functionality: Proxies can add additional functionality, like logging or caching, without modifying the real object.</li>
</ul>
<h2 id="Example-of-Usage"><a href="#Example-of-Usage" class="headerlink" title="Example of Usage"></a>Example of Usage</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyPatternExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Image image = <span class="keyword">new</span> ProxyImage(<span class="string">"test.jpg"</span>);</span><br><span class="line">        <span class="comment">// Image is loaded from disk only when display is called</span></span><br><span class="line">        image.display();</span><br><span class="line">        image.display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Explanation:</p>
<ol>
<li>We create a <code>ProxyImage</code> instance with the file name “test.jpg”.</li>
<li>The first time <code>display()</code> is called, <code>RealImage</code> is instantiated and the image is loaded and displayed.</li>
<li>The second time <code>display()</code> is called, the already instantiated <code>RealImage</code> is used, avoiding reloading.</li>
</ol>
<h1 id="135-map-vs-flatMap"><a href="#135-map-vs-flatMap" class="headerlink" title="135-map vs. flatMap"></a>135-map vs. flatMap</h1><p>In functional programming, <code>Map</code> and <code>FlatMap</code> are two commonly used higher-order functions, especially in languages like Java, Scala, Python, and JavaScript. Here’s a detailed explanation of both:</p>
<ul>
<li><p>Map</p>
<ul>
<li><p>Purpose: The <code>Map</code> function takes a function and applies it to each element of a collection, transforming each element into a new element. The result is a collection of the same size, where each element has been transformed by the function.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">        <span class="comment">// Map each integer to its square</span></span><br><span class="line">        List&lt;Integer&gt; squaredNumbers = numbers.stream()</span><br><span class="line">                                    .map(n -&gt; n * n)</span><br><span class="line">                                    .collect(Collectors.toList());</span><br><span class="line">        System.out.println(squaredNumbers);  <span class="comment">// [1, 4, 9, 16, 25]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We have a list of integers <code>numbers</code>.</li>
<li>We use the <code>stream()</code> method to convert the list into a stream.</li>
<li>The <code>map()</code> function takes a lambda expression <code>n -&gt; n * n</code>, which squares each element.</li>
<li>The <code>collect(Collectors.toList())</code> method collects the transformed elements back into a list.</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>FlatMap</p>
<ul>
<li><p>Purpose: The <code>FlatMap</code> function takes a function that returns a collection for each element in the original collection. It then flattens all these collections into a single collection. It is used when you have a collection of collections and want to transform them into a single collection.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlatMapExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; numberLists = Arrays.asList(</span><br><span class="line">                Arrays.asList(<span class="number">1</span>, <span class="number">2</span>),</span><br><span class="line">                Arrays.asList(<span class="number">3</span>, <span class="number">4</span>),</span><br><span class="line">                Arrays.asList(<span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">// FlatMap to convert a list of lists into a single list</span></span><br><span class="line">        List&lt;Integer&gt; flattenedNumbers = numberLists.stream()</span><br><span class="line">                                            .flatMap(list -&gt; list.stream())</span><br><span class="line">                                            .collect(Collectors.toList());</span><br><span class="line">        System.out.println(flattenedNumbers);  <span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We have a list of lists of integers <code>numberLists</code>.</li>
<li>We use <code>stream()</code> to convert the list of lists into a stream.</li>
<li>The <code>flatMap()</code> function takes a lambda expression <code>list -&gt; list.stream()</code>, which converts each inner list into a stream.</li>
<li>The <code>flatMap()</code> function then flattens all these streams into a single stream.</li>
<li>Finally, <code>collect(Collectors.toList())</code> collects the elements from the flattened stream into a single list.</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="374-Synchronized-Method-vs-Synchronized-block"><a href="#374-Synchronized-Method-vs-Synchronized-block" class="headerlink" title="374-Synchronized Method vs Synchronized block"></a>374-Synchronized Method vs Synchronized block</h1><ul>
<li><p>Synchronized Method</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedMethodExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ul>
<li>The <code>synchronized</code> keyword is applied directly to the method signature.</li>
<li>When a thread calls <code>increment()</code>, <strong>it acquires the lock on the object instance (this) of the class.</strong></li>
<li>No other thread can execute any other synchronized method of the same object until the first thread completes the execution of the synchronized method.</li>
<li>It’s a simple way to ensure thread safety but can lead to performance issues if the method contains non-critical code that doesn’t need synchronization.</li>
</ul>
</li>
</ul>
</li>
<li><p>Synchronized Block</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SynchronizedBlockExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ul>
<li>A synchronized block is used within a method.</li>
<li>The <code>synchronized (lock)</code> statement takes an object (in this case, <code>lock</code>) as an argument. This object serves as the lock.</li>
<li>Only one thread can enter the synchronized block that uses the same <code>lock</code> object at a time.</li>
<li>This allows for more granular control over what part of the method is synchronized, which can improve performance by limiting the scope of synchronization to only the critical section.</li>
</ul>
</li>
</ul>
</li>
<li>Key Differences<ul>
<li>Scope of Synchronization:<ul>
<li>Synchronized Method: The entire method is synchronized, even if not all code within the method requires synchronization.</li>
<li>Synchronized Block: Only the code within the synchronized block is synchronized, allowing other parts of the method to be executed concurrently by different threads.</li>
</ul>
</li>
<li>Lock Object:<ul>
<li>Synchronized Method: The lock object is the instance of the class itself (this) for instance methods, or the class object for static methods.</li>
<li>Synchronized Block: You can specify any object as the lock, giving you flexibility in choosing the granularity of locking.</li>
</ul>
</li>
<li>Performance:<ul>
<li>Synchronized Method: May lead to unnecessary locking and reduced performance if the method contains code that does not need to be synchronized.</li>
<li>Synchronized Block: Allows for more efficient locking by only synchronizing the necessary parts of the code.</li>
</ul>
</li>
</ul>
</li>
<li>Best Practices<ul>
<li>Use Synchronized Method: When the entire method needs to be thread-safe and the method is relatively small.</li>
<li>Use Synchronized Block: When only a part of the method needs to be synchronized, especially in longer methods where only a small part accesses shared resources.</li>
</ul>
</li>
</ul>
<h1 id="106-Thread"><a href="#106-Thread" class="headerlink" title="106-Thread"></a>106-Thread</h1><p>Here is an explanation of some important thread methods in Java: <code>join</code>, <code>wait</code>, <code>sleep</code>, and <code>yield</code>.</p>
<h2 id="join-Method"><a href="#join-Method" class="headerlink" title="join() Method"></a>join() Method</h2><ul>
<li><p>Purpose: The <code>join()</code> method is used to wait for a thread to complete its execution. It is often used when one thread needs to wait for another thread to finish before it can continue its own execution.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JoinExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                System.out.println(<span class="string">"Thread 1 completed"</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread1.join();</span><br><span class="line">        System.out.println(<span class="string">"Main thread continues after thread1 completes"</span>);</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread 1 completed</span></span><br><span class="line"><span class="comment">            Main thread continues after thread1 completes</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create a new <code>Thread</code> (<code>thread1</code>) which sleeps for 2 seconds and then prints a message.</li>
<li>We start <code>thread1</code> with <code>thread1.start()</code>.</li>
<li>We call <code>thread1.join()</code>, which makes the main thread wait until <code>thread1</code> completes its execution.</li>
<li>Only after <code>thread1</code> completes, the main thread prints its message.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="wait-Method"><a href="#wait-Method" class="headerlink" title="wait() Method"></a>wait() Method</h2><ul>
<li><p>Purpose: The <code>wait()</code> method is used to make a thread wait <strong>until some other thread notifies it</strong>. It must be called from a synchronized block or method, and it releases the lock on the object.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Thread 1 is waiting"</span>);</span><br><span class="line">                    lock.wait();</span><br><span class="line">                    System.out.println(<span class="string">"Thread 1 resumed"</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread 2 notifying"</span>);</span><br><span class="line">                lock.notify();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        thread2.start();</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread 1 is waiting</span></span><br><span class="line"><span class="comment">            Thread 2 notifying</span></span><br><span class="line"><span class="comment">            Thread 1 resumed</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create an object <code>lock</code> which serves as a lock for synchronization.</li>
<li><code>thread1</code> enters a synchronized block, calls <code>wait()</code>, and waits.</li>
<li><code>thread2</code> enters the same synchronized block, calls <code>notify()</code>, and wakes up <code>thread1</code>.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="sleep-Method"><a href="#sleep-Method" class="headerlink" title="sleep() Method"></a>sleep() Method</h2><ul>
<li><p>Purpose: The <code>sleep()</code> method is used to pause the execution of a thread for a specified amount of time. The thread does not release any locks during this time.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SleepExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread 1 sleeping"</span>);</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                System.out.println(<span class="string">"Thread 1 awake"</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread 1 sleeping</span></span><br><span class="line"><span class="comment">            Thread 1 awake</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create a new <code>Thread</code> (<code>thread1</code>).</li>
<li><code>thread1</code> calls <code>Thread.sleep(2000)</code>, which pauses the thread for 2 seconds.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="yield-Method"><a href="#yield-Method" class="headerlink" title="yield() Method"></a>yield() Method</h2><ul>
<li><p>Purpose: The <code>yield()</code> method is used to suggest to the thread scheduler that the current thread is willing to yield its current use of the processor. The thread scheduler is free to ignore this suggestion.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YieldExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread 1: "</span> + i);</span><br><span class="line">                Thread.yield();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                System.out.println(<span class="string">"Thread 2: "</span> + i);</span><br><span class="line">                Thread.yield();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread 2: 0</span></span><br><span class="line"><span class="comment">            Thread 2: 1</span></span><br><span class="line"><span class="comment">            Thread 2: 2</span></span><br><span class="line"><span class="comment">            Thread 1: 0</span></span><br><span class="line"><span class="comment">            Thread 1: 1</span></span><br><span class="line"><span class="comment">            Thread 1: 2</span></span><br><span class="line"><span class="comment">            Thread 2: 3</span></span><br><span class="line"><span class="comment">            Thread 2: 4</span></span><br><span class="line"><span class="comment">            Thread 1: 3</span></span><br><span class="line"><span class="comment">            Thread 1: 4</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create two threads (<code>thread1</code> and <code>thread2</code>).</li>
<li>Each thread prints a message and calls <code>Thread.yield()</code>, suggesting that the scheduler can give the CPU to another thread.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="104-How-does-thread-communicate-interact-share-data-with-each-other"><a href="#104-How-does-thread-communicate-interact-share-data-with-each-other" class="headerlink" title="104-How does thread communicate/interact/share data with each other"></a>104-How does thread communicate/interact/share data with each other</h2><p>In Java, threads can communicate, interact, and share data with each other through several mechanisms. Here’s a detailed overview of these methods:</p>
<h3 id="Shared-Variables"><a href="#Shared-Variables" class="headerlink" title="Shared Variables"></a>Shared Variables</h3><ul>
<li><p>Using Volatile Variables:</p>
<ul>
<li>A <code>volatile</code> variable ensures that all reads and writes to the variable are directly to and from main memory, not cached by threads. It is useful for simple flags or status indicators.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VolatileExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFlag</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        flag = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getFlag</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>private volatile boolean flag = false;</code>: Declares a <code>volatile</code> boolean variable.</li>
<li><code>setFlag()</code> sets the <code>flag</code> to <code>true</code>.</li>
<li><code>getFlag()</code> retrieves the value of <code>flag</code>.</li>
<li>Changes made by one thread to <code>flag</code> are immediately visible to other threads.</li>
</ol>
</li>
</ul>
<h3 id="Synchronization"><a href="#Synchronization" class="headerlink" title="Synchronization"></a>Synchronization</h3><ul>
<li><p>Using Synchronized Methods and Blocks:</p>
<ul>
<li>Synchronization ensures that only one thread can access a synchronized method or block at a time, preventing race conditions.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SharedData</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>public synchronized void increment() {... }</code>: Synchronized method ensures thread-safe access to <code>count</code>.</li>
<li><code>public synchronized int getCount() {... }</code>: Ensures thread-safe access when reading <code>count</code>.</li>
</ol>
</li>
</ul>
<h3 id="Wait-Notify-and-NotifyAll"><a href="#Wait-Notify-and-NotifyAll" class="headerlink" title="Wait, Notify, and NotifyAll"></a>Wait, Notify, and NotifyAll</h3><ul>
<li><p>Using wait(), notify(), and notifyAll():</p>
<ul>
<li>These methods are used in conjunction with synchronized blocks to pause and resume threads.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitNotifyExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> ready = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">waitForReady</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            <span class="keyword">while</span> (!ready) &#123;</span><br><span class="line">                lock.wait();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            ready = <span class="keyword">true</span>;</span><br><span class="line">            lock.notifyAll();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>waitForReady()</code> waits until <code>ready</code> is <code>true</code>, using <code>lock.wait()</code>.</li>
<li><code>setReady()</code> sets <code>ready</code> to <code>true</code> and wakes up waiting threads using <code>lock.notifyAll()</code>.</li>
</ol>
</li>
</ul>
<h3 id="Thread-Confinement"><a href="#Thread-Confinement" class="headerlink" title="Thread Confinement"></a>Thread Confinement</h3><ul>
<li><p>Using ThreadLocal:</p>
<ul>
<li><code>ThreadLocal</code> allows each thread to have its own copy of a variable.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadLocalExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;Integer&gt; threadLocal = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        threadLocal.set(<span class="number">1</span>);</span><br><span class="line">        System.out.println(threadLocal.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>ThreadLocal&lt;Integer&gt; threadLocal = new ThreadLocal&lt;&gt;();</code>: Creates a <code>ThreadLocal</code> variable.</li>
<li><code>threadLocal.set(1);</code>: Sets the value for the current thread.</li>
<li><code>threadLocal.get();</code>: Retrieves the value for the current thread.</li>
</ol>
</li>
</ul>
<h3 id="Using-Concurrent-Data-Structures"><a href="#Using-Concurrent-Data-Structures" class="headerlink" title="Using Concurrent Data Structures"></a>Using Concurrent Data Structures</h3><ul>
<li><p>Using Concurrent Collections:</p>
<ul>
<li>Java provides concurrent collections like <code>ConcurrentHashMap</code>, <code>CopyOnWriteArrayList</code>, etc., which are thread-safe.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcurrentMapExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ConcurrentHashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">"key"</span>, <span class="number">1</span>);</span><br><span class="line">        System.out.println(map.get(<span class="string">"key"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();</code>: Creates a thread-safe map.</li>
<li><code>map.put(&quot;key&quot;, 1);</code>: Puts an entry in the map.</li>
<li><code>map.get(&quot;key&quot;);</code>: Retrieves the value from the map.</li>
</ol>
</li>
</ul>
<h3 id="Using-Locks-and-Condition-Variables"><a href="#Using-Locks-and-Condition-Variables" class="headerlink" title="Using Locks and Condition Variables"></a>Using Locks and Condition Variables</h3><ul>
<li><p>Using ReentrantLock and Condition:</p>
<ul>
<li><code>ReentrantLock</code> provides more flexible locking than <code>synchronized</code>, and <code>Condition</code> allows more control over waiting and signaling.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockConditionExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Condition condition = lock.newCondition();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> ready = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">waitForReady</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (!ready) &#123;</span><br><span class="line">                condition.await();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReady</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ready = <span class="keyword">true</span>;</span><br><span class="line">            condition.signalAll();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>ReentrantLock lock = new ReentrantLock();</code>: Creates a reentrant lock.</li>
<li><code>Condition condition = lock.newCondition();</code>: Creates a condition associated with the lock.</li>
<li><code>condition.await();</code> makes the thread wait.</li>
<li><code>condition.signalAll();</code> wakes up waiting threads.</li>
</ol>
</li>
</ul>
<p>By using these mechanisms, threads can communicate, interact, and share data safely and efficiently, avoiding race conditions and ensuring thread-safe access to shared resources.</p>
<h2 id="121-373-deadlock"><a href="#121-373-deadlock" class="headerlink" title="121-373-deadlock"></a>121-373-deadlock</h2><p>Deadlock is when you have 2 threads, Thread1 is waiting Thread2 to release lock on an object while Thread2 is waiting for Thread1 to release lock on an object. They are waiting on each other.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadLock</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String R1 = <span class="string">"Hello Welcome to Pilot!"</span>;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">static</span> String R2 = <span class="string">"Visit Pilot!"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// creating thread T1</span></span><br><span class="line">        Thread T1 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="comment">// implementing run method</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">// thread T1 locking the R1 resource</span></span><br><span class="line">                <span class="keyword">synchronized</span> (R1) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Thread T1 locked -&gt;   Resource R1"</span>);</span><br><span class="line">                    <span class="comment">// thread T1 locking the R2 resource</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (R2) &#123;</span><br><span class="line">                        System.out.println(<span class="string">"Thread T1 locked -&gt; Resource R2"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// creating thread T2</span></span><br><span class="line">        Thread T2 = <span class="keyword">new</span> Thread() &#123;</span><br><span class="line">            <span class="comment">// implementing run method</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="comment">// thread T2 locking the R2 resource</span></span><br><span class="line">                <span class="keyword">synchronized</span> (R2) &#123;</span><br><span class="line">                    System.out.println(<span class="string">"Thread T2 locked -&gt; Resource R2"</span>);</span><br><span class="line">                    <span class="comment">// thread T2 locking the R1 resource</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (R1) &#123;</span><br><span class="line">                        System.out.println(<span class="string">"Thread T1 locked -&gt; Resource R1"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// starting both the threads</span></span><br><span class="line">        T1.start();</span><br><span class="line">        T2.start();</span><br><span class="line">        <span class="comment">/* result print:  </span></span><br><span class="line"><span class="comment">            Thread T1 locked -&gt;   Resource R1</span></span><br><span class="line"><span class="comment">            Thread T2 locked -&gt; Resource R2</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Finding-Deadlocks"><a href="#Finding-Deadlocks" class="headerlink" title="Finding Deadlocks"></a>Finding Deadlocks</h3><ul>
<li><p>Thread Dump Analysis:</p>
<ul>
<li>You can use tools like <code>jstack</code> (part of the JDK) to take a thread dump of a running Java application. A thread dump shows the state of all threads, including which locks they hold and which locks they are waiting for.</li>
<li><p>Example of using <code>jstack</code>:</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstack &lt;PID&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Here, <code>&lt;PID&gt;</code> is the process ID of the Java application.</p>
</li>
<li>Analyzing the thread dump:<ul>
<li>Look for threads that are in the <code>BLOCKED</code> state. If two or more threads are waiting on locks held by each other, it indicates a deadlock.</li>
<li>For example, if Thread A is waiting for a lock held by Thread B, and Thread B is waiting for a lock held by Thread A, it’s a deadlock.</li>
</ul>
</li>
</ul>
</li>
<li>Java VisualVM:<ul>
<li>Java VisualVM is a monitoring and profiling tool. It can detect deadlocks automatically.</li>
<li>Steps:<ol>
<li>Start your Java application.</li>
<li>Open Java VisualVM.</li>
<li>Locate your application in the list of running Java processes.</li>
<li>Go to the “Threads” tab.</li>
<li>Look for deadlock warnings, and examine thread states and locks.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="Avoiding-Deadlocks"><a href="#Avoiding-Deadlocks" class="headerlink" title="Avoiding Deadlocks"></a>Avoiding Deadlocks</h3><ul>
<li><p>Lock Ordering:</p>
<ul>
<li>Always acquire locks in a consistent order across all threads.</li>
<li><p>Example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadlockAvoidance</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lock1 = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object lock2 = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock1) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock2) &#123;</span><br><span class="line">                <span class="comment">// Critical section</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock1) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (lock2) &#123;</span><br><span class="line">                <span class="comment">// Critical section</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Explanation:</p>
<ul>
<li>Both <code>method1()</code> and <code>method2()</code> acquire <code>lock1</code> before <code>lock2</code>. This ensures that no thread holds <code>lock2</code> while waiting for <code>lock1</code>.</li>
</ul>
</li>
</ul>
</li>
<li><p>Lock Timeout:</p>
<ul>
<li>Use <code>tryLock()</code> with a timeout instead of <code>synchronized</code> or <code>lock()</code>.</li>
<li><p>Example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeoutLockExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Lock lock1 = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Lock lock2 = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> lock1Acquired = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">boolean</span> lock2Acquired = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock1Acquired = lock1.tryLock(<span class="number">100</span>, TimeUnit.MILLISECONDS);</span><br><span class="line">            lock2Acquired = lock2.tryLock(<span class="number">100</span>, TimeUnit.MILLISECONDS);</span><br><span class="line">            <span class="keyword">if</span> (lock1Acquired &amp;&amp; lock2Acquired) &#123;</span><br><span class="line">                <span class="comment">// Critical section</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="comment">// Handle interruption</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (lock1Acquired) lock1.unlock();</span><br><span class="line">            <span class="keyword">if</span> (lock2Acquired) lock2.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Explanation:</p>
<ol>
<li><code>tryLock(100, TimeUnit.MILLISECONDS)</code> tries to acquire the lock with a timeout of 100 milliseconds.</li>
<li>If the lock cannot be acquired within the timeout, the thread can take corrective action.</li>
</ol>
</li>
</ul>
</li>
<li>Avoid Nested Locks:<ul>
<li>Minimize the use of nested locks. If possible, design your code to use a single lock or fewer nested locks.</li>
</ul>
</li>
</ul>
<h3 id="Best-Practices-1"><a href="#Best-Practices-1" class="headerlink" title="Best Practices"></a>Best Practices</h3><ul>
<li>Resource Allocation Graph:<ul>
<li>Use a resource allocation graph to analyze potential deadlocks before implementation.</li>
<li>Ensure that the graph does not contain cycles, which indicate potential deadlocks.</li>
</ul>
</li>
<li>Deadlock Detection Algorithms:<ul>
<li>Implement deadlock detection algorithms like the Banker’s algorithm in more complex systems, especially in operating systems or resource management systems.</li>
</ul>
</li>
</ul>
<h1 id="118-Relationship-between-equals-and-hashcode"><a href="#118-Relationship-between-equals-and-hashcode" class="headerlink" title="118-Relationship between equals() and hashcode()"></a>118-Relationship between equals() and hashcode()</h1><p>In Java, the <code>equals()</code> method is used to compare the equality of two objects. Here’s a detailed explanation:</p>
<h2 id="Default-Implementation"><a href="#Default-Implementation" class="headerlink" title="Default Implementation"></a>Default Implementation</h2><ul>
<li>The <code>equals()</code> method is defined in the <code>Object</code> class, which is the superclass of all classes in Java.</li>
<li><p>The default implementation of <code>equals()</code> uses the <code>==</code> operator, which checks if two references point to the same object (i.e., reference equality).</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EqualsExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Object obj1 = <span class="keyword">new</span> Object();</span><br><span class="line">        Object obj2 = <span class="keyword">new</span> Object();</span><br><span class="line">        Object obj3 = obj1;</span><br><span class="line"></span><br><span class="line">        System.out.println(obj1.equals(obj2)); <span class="comment">// false</span></span><br><span class="line">        System.out.println(obj1.equals(obj3)); <span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li><code>obj1.equals(obj2)</code> returns <code>false</code> because <code>obj1</code> and <code>obj2</code> are different object instances.</li>
<li><code>obj1.equals(obj3)</code> returns <code>true</code> because <code>obj3</code> refers to the same object as <code>obj1</code>.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="Overriding-equals"><a href="#Overriding-equals" class="headerlink" title="Overriding equals()"></a>Overriding equals()</h2><ul>
<li><p>You should override the <code>equals()</code> method in your custom classes if you want to compare objects based on their state (content equality) rather than reference equality.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass()!= o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Person person = (Person) o;</span><br><span class="line">        <span class="keyword">return</span> age == person.age &amp;&amp; name.equals(person.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li><code>if (this == o) return true;</code> checks if the objects are the same reference.</li>
<li><code>if (o == null || getClass()!= o.getClass()) return false;</code> checks if <code>o</code> is <code>null</code> or not of the same class.</li>
<li><code>Person person = (Person) o;</code> casts <code>o</code> to <code>Person</code>.</li>
<li><code>return age == person.age &amp;&amp; name.equals(person.name);</code> compares the <code>age</code> and <code>name</code> fields.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="hashCode-and-equals"><a href="#hashCode-and-equals" class="headerlink" title="hashCode() and equals()"></a>hashCode() and equals()</h2><ul>
<li>If you override <code>equals()</code>, you should also override <code>hashCode()</code>.</li>
<li><p>The <code>hashCode()</code> method is used in hash-based collections like <code>HashMap</code> and <code>HashSet</code>.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass()!= o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Person person = (Person) o;</span><br><span class="line">        <span class="keyword">return</span> age == person.age &amp;&amp; name.equals(person.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = name.hashCode();</span><br><span class="line">        result = <span class="number">31</span> * result + age;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li><code>hashCode()</code> is overridden to generate a hash code based on <code>name</code> and <code>age</code>.</li>
<li>The formula <code>int result = name.hashCode(); result = 31 * result + age;</code> is a common way to combine hash codes.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="Rules-for-equals"><a href="#Rules-for-equals" class="headerlink" title="Rules for equals()"></a>Rules for equals()</h2><ul>
<li>Reflexive: <code>x.equals(x)</code> should always be <code>true</code>.</li>
<li>Symmetric: If <code>x.equals(y)</code> is <code>true</code>, then <code>y.equals(x)</code> should also be <code>true</code>.</li>
<li>Transitive: If <code>x.equals(y)</code> is <code>true</code> and <code>y.equals(z)</code> is <code>true</code>, then <code>x.equals(z)</code> should be <code>true</code>.</li>
<li>Consistent: Repeated calls to <code>equals()</code> should return the same result, if the objects have not changed.</li>
<li>Null Check: <code>x.equals(null)</code> should always be <code>false</code>.</li>
</ul>
<h2 id="Using-equals"><a href="#Using-equals" class="headerlink" title="Using equals()"></a>Using equals()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EqualsUsage</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p1 = <span class="keyword">new</span> Person(<span class="string">"John"</span>, <span class="number">30</span>);</span><br><span class="line">        Person p2 = <span class="keyword">new</span> Person(<span class="string">"John"</span>, <span class="number">30</span>);</span><br><span class="line">        Person p3 = <span class="keyword">new</span> Person(<span class="string">"Jane"</span>, <span class="number">25</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(p1.equals(p2)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(p1.equals(p3)); <span class="comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li><code>p1.equals(p2)</code> returns <code>true</code> because <code>p1</code> and <code>p2</code> have the same <code>name</code> and <code>age</code>(because we overrode its <code>equals</code> method above).</li>
<li><code>p1.equals(p3)</code> returns <code>false</code> because <code>p1</code> and <code>p3</code> have different <code>name</code> and <code>age</code>.</li>
</ol>
</li>
</ul>
<h1 id="132-What-is-fail-fast-and-fail-safe"><a href="#132-What-is-fail-fast-and-fail-safe" class="headerlink" title="132-What is fail-fast and fail-safe?"></a>132-What is fail-fast and fail-safe?</h1><p>Here’s an explanation of fail-fast and fail-safe mechanisms in Java, particularly in the context of collections:</p>
<h2 id="Fail-Fast"><a href="#Fail-Fast" class="headerlink" title="Fail-Fast"></a>Fail-Fast</h2><ul>
<li>Concept:<ul>
<li>Fail-fast iterators in Java immediately throw a <code>ConcurrentModificationException</code> if the collection is modified structurally during iteration. Structural modifications include adding or removing elements.</li>
<li>It is designed to fail as soon as possible to avoid unpredictable behavior due to concurrent modifications.</li>
</ul>
</li>
<li><p>Example of Fail-Fast Iterator:</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ConcurrentModificationException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">"A"</span>);</span><br><span class="line">        list.add(<span class="string">"B"</span>);</span><br><span class="line">        list.add(<span class="string">"C"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line">            <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">                String element = iterator.next();</span><br><span class="line">                <span class="keyword">if</span> (element.equals(<span class="string">"A"</span>)) &#123;</span><br><span class="line">                    <span class="comment">// Structural modification</span></span><br><span class="line">                    list.remove(element);</span><br><span class="line">                    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                    the correct way!! When we want to remove an element, we use iterator.remove() instead of list.remove(element). This is the correct way to remove elements while iterating through the list, as the iterator's remove() method is designed to handle the modification safely, updating the internal state of the iterator and avoiding ConcurrentModificationException.</span></span><br><span class="line"><span class="comment">                    */</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ConcurrentModificationException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"ConcurrentModificationException caught: "</span> + e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* result print:</span></span><br><span class="line"><span class="comment">            ConcurrentModificationException caught: null</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create an <code>ArrayList</code> and add elements “A”, “B”, and “C”.</li>
<li>We obtain an iterator using <code>list.iterator()</code>.</li>
<li>While iterating, we attempt to remove an element using <code>list.remove(element)</code>.</li>
<li>This results in a <code>ConcurrentModificationException</code> because the collection is modified during iteration.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="Fail-Safe"><a href="#Fail-Safe" class="headerlink" title="Fail-Safe"></a>Fail-Safe</h2><ul>
<li>Concept:<ul>
<li>Fail-safe iterators in Java do not throw <code>ConcurrentModificationException</code> when the collection is modified structurally during iteration.</li>
<li>They operate on a copy of the collection, not the original collection, so changes to the original collection do not affect the iteration.</li>
</ul>
</li>
<li><p>Example of Fail-Safe Iterator:</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CopyOnWriteArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FailSafeExample</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">                CopyOnWriteArrayList&lt;String&gt; list = <span class="keyword">new</span> CopyOnWriteArrayList&lt;&gt;();</span><br><span class="line">                list.add(<span class="string">"A"</span>);</span><br><span class="line">                list.add(<span class="string">"B"</span>);</span><br><span class="line">                list.add(<span class="string">"C"</span>);</span><br><span class="line"></span><br><span class="line">                Iterator&lt;String&gt; iterator = list.iterator();</span><br><span class="line">                <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">                        String element = iterator.next();</span><br><span class="line">                        <span class="keyword">if</span> (element.equals(<span class="string">"B"</span>)) &#123;</span><br><span class="line">                                <span class="comment">// Structural modification</span></span><br><span class="line">                                list.remove(element);</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Explanation:<ol>
<li>We create a <code>CopyOnWriteArrayList</code>.</li>
<li>We add elements “A”, “B”, and “C”.</li>
<li>We obtain an iterator using <code>list.iterator()</code>.</li>
<li>We attempt to remove an element using <code>list.remove(element)</code> during iteration.</li>
<li>No <code>ConcurrentModificationException</code> is thrown because <code>CopyOnWriteArrayList</code> uses a fail-safe iterator that works on a copy of the list.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="Key-Differences-1"><a href="#Key-Differences-1" class="headerlink" title="Key Differences"></a>Key Differences</h2><ul>
<li>Concurrency Handling:<ul>
<li>Fail-Fast: Detects concurrent modifications and fails immediately, useful in single-threaded or low-concurrency environments.</li>
<li>Fail-Safe: Does not fail when the collection is modified, suitable for concurrent environments.</li>
</ul>
</li>
<li>Performance:<ul>
<li>Fail-Fast: Generally more efficient in single-threaded environments as it does not need to create copies of the collection.</li>
<li>Fail-Safe: Slower in single-threaded environments due to copying the collection, but more suitable for concurrent environments.</li>
</ul>
</li>
</ul>
<h2 id="Best-Practices-2"><a href="#Best-Practices-2" class="headerlink" title="Best Practices"></a>Best Practices</h2><ul>
<li>Use Fail-Fast: When you are in a single-threaded or low-concurrency environment and want to detect concurrent modifications early.</li>
<li>Use Fail-Safe: When you expect concurrent modifications and want to avoid <code>ConcurrentModificationException</code>, especially in highly concurrent environments.</li>
<li>Understanding the difference between fail-fast and fail-safe mechanisms helps you choose the right collection and iterator for your concurrency needs, ensuring robustness and predictability in your code.</li>
</ul>
<h1 id="163-what-is-SOLID-principle"><a href="#163-what-is-SOLID-principle" class="headerlink" title="163-what is SOLID principle"></a>163-what is SOLID principle</h1><p>The SOLID principles are a set of five design principles in object - oriented programming and software design. These principles help in creating more maintainable, flexible, and understandable software systems. Here’s a detailed look at each of them:</p>
<ul>
<li>Single Responsibility Principle (SRP)**<ul>
<li>Definition: A class should have only one reason to change. In other words, a class should have only one job or responsibility.</li>
<li>Example: Consider a class that is responsible for calculating the area of different geometric shapes (like circles, rectangles, etc.) and also responsible for saving the calculated results to a database. This violates the SRP. A better design would be to have one class for calculating the areas and another class for handling the database operations.</li>
<li>Benefits: It makes the classes more focused and easier to understand and maintain. When a change is required related to a particular responsibility (say, a change in the area - calculation formula), it’s clear which class needs to be modified and other classes are not affected.</li>
</ul>
</li>
<li>Open - Closed Principle (OCP)**<ul>
<li>Definition: Software entities (classes, modules, functions, etc.) should be open for extension but closed for modification.</li>
<li>Example: Let’s say you have a drawing application that can draw different shapes. Initially, it can draw circles and rectangles. If you want to add a new shape like a triangle, you should be able to do it without modifying the existing drawing code for circles and rectangles. This can be achieved through inheritance or interfaces. For instance, you can have an abstract <code>Shape</code> class with a <code>draw()</code> method, and concrete classes for <code>Circle</code>, <code>Rectangle</code>, and <code>Triangle</code> that implement the <code>draw()</code> method.</li>
<li>Benefits: It allows for easy addition of new functionality without the risk of breaking the existing code that has already been tested and is working. This leads to more stable and maintainable software over time.</li>
</ul>
</li>
<li>Liskov Substitution Principle (LSP)**<ul>
<li>Definition: Subtypes must be substitutable for their base types. In other words, if you have a program that is using a base class, you should be able to substitute a derived class in its place without changing the correctness of the program.</li>
<li>Example: Consider a base class <code>Vehicle</code> with a method <code>startEngine()</code>. A subclass <code>Car</code> inherits from <code>Vehicle</code>. If the <code>Car</code> class redefines the <code>startEngine()</code> method in such a way that it violates the expected behavior (for example, the <code>startEngine()</code> method in the <code>Car</code> class throws an exception every time it’s called, while in the <code>Vehicle</code> class it starts the engine successfully most of the time), then it violates the LSP.</li>
<li>Benefits: It ensures that the inheritance hierarchy is used in a way that is consistent with the expected behavior. This helps in building more reliable and understandable object - oriented hierarchies.</li>
</ul>
</li>
<li>Interface Segregation Principle (ISP)**<ul>
<li>Definition: Clients should not be forced to depend on interfaces they do not use. Instead of having a large, monolithic interface, it’s better to have smaller, more specific interfaces.</li>
<li>Example: Suppose you have an interface <code>Worker</code> that has methods like <code>work()</code>, <code>takeBreak()</code>, <code>attendMeeting()</code>, and <code>doPaperwork()</code>. Now, consider a class <code>ManualLaborer</code> that only needs to implement the <code>work()</code> method and doesn’t need to deal with <code>doPaperwork()</code> etc. Having a single <code>Worker</code> interface forces the <code>ManualLaborer</code> class to implement methods it doesn’t need. A better approach would be to split the <code>Worker</code> interface into smaller interfaces like <code>PhysicalWorker</code> (with <code>work()</code> method) and <code>OfficeWorker</code> (with <code>doPaperwork()</code>, <code>attendMeeting()</code> etc.)</li>
<li>Benefits: It reduces the coupling between different parts of the system. Classes only need to implement the interfaces that are relevant to them, which makes the code more modular and easier to understand and maintain.</li>
</ul>
</li>
<li>Dependency Inversion Principle (DIP)**<ul>
<li>Definition: <code>High-level</code> modules should not depend on <code>low-level</code> modules. Both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions.</li>
<li>Example: Consider a <code>high-level</code> module like a <code>UserController</code> in a web application that depends on a <code>low-level</code> module like a <code>UserRepository</code> which is responsible for database operations. Instead of the <code>UserController</code> directly depending on the <code>UserRepository</code>, they both can depend on an abstraction like an <code>IUserRepository</code> interface. The <code>UserRepository</code> class implements this interface, and the <code>UserController</code> uses the methods defined in the interface. This way, if you want to change the way user data is stored (say, from a SQL database to a NoSQL database), you only need to change the implementation of the <code>IUserRepository</code> interface, and the <code>UserController</code> remains unaffected.</li>
<li>Benefits: It makes the code more flexible and easier to test. By depending on abstractions, different implementations can be swapped in and out without major changes to the <code>high-level</code> modules.</li>
</ul>
</li>
</ul>
<h1 id="What’s-Garbage-collection-types-and-Whats-new-about-GC-in-java-8"><a href="#What’s-Garbage-collection-types-and-Whats-new-about-GC-in-java-8" class="headerlink" title="What’s Garbage collection types and Whats new about GC in java 8"></a>What’s Garbage collection types and Whats new about GC in java 8</h1><p>Reference: <a href="https://zhuanlan.zhihu.com/p/25539690" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/25539690</a></p>
<h2 id="compact-version"><a href="#compact-version" class="headerlink" title="compact version"></a>compact version</h2><ul>
<li>Types of GC:<ul>
<li>Serial Garbage Collector: Uses only single thread to perform garbage collection. Good for small sized heaps.</li>
<li>Parallel Garbage Collector: Use multiple threads to in parallel. Good for multi-core systems, like systems with high throughput.</li>
<li>CMS (Concurrent) Garbage Collector: perform GC concurrently with application execution. Used for system requires very low-latency.</li>
<li>G1(Garbage-First) Garbage Collector: It is to balance between low-latency and high throughput. It divides heap into regions and perform GC with each region.</li>
</ul>
</li>
<li>What’s new in Java:<ul>
<li>MetaSpace: Preivouly java use fixed size for Permanent Generation (store metadata and internal code), java 8 introduces metaspace which is flexible based on system memeory.</li>
<li>G1 is made as default GC for large heaps.</li>
</ul>
</li>
<li>Java allows you to choose different GC algorithms based on your JVM version. Common GC options include -XX:+UseSerialGC, -XX:+UseParallelGC, -XX:+UseConcMarkSweepGC, and -XX:+UseG1GC.</li>
</ul>
<h2 id="detailed-version"><a href="#detailed-version" class="headerlink" title="detailed version"></a>detailed version</h2><ol>
<li><strong>Garbage Collection Types in Java</strong><ul>
<li>Serial Garbage Collector:<ul>
<li>Explanation: This is the simplest and most basic garbage collector. It uses a single thread to perform garbage collection. When it runs, it stops all application threads (a “stop - the - world” event) and then scans the heap to identify and reclaim memory occupied by unreachable objects.</li>
<li>Use Case: It’s suitable for small applications or applications with simple memory usage patterns and where the short pauses during garbage collection are not a critical concern. For example, a simple command - line tool that doesn’t have strict performance requirements and manages a relatively small amount of data.</li>
</ul>
</li>
<li>Parallel Garbage Collector:<ul>
<li>Explanation: Also known as the throughput collector, it uses multiple threads to perform garbage collection. Similar to the serial collector, it also causes “stop - the - world” pauses. However, due to the use of multiple threads, it can generally complete the garbage collection process more quickly than the serial collector, especially on multi - core machines. The heap is divided into generations (young and old), and it focuses on the young generation first. It uses a copying algorithm for the young generation and a mark - sweep - compact algorithm for the old generation.</li>
<li>Use Case: Ideal for applications where high throughput is the main objective. For example, in a batch - processing application where the focus is on completing a large number of tasks in a short time, and a short pause for garbage collection is acceptable to achieve better overall performance.</li>
</ul>
</li>
<li>CMS (Concurrent - Mark - Sweep) Garbage Collector:<ul>
<li>Explanation: The CMS garbage collector aims to reduce the pause times during garbage collection. It attempts to perform most of its work concurrently with the application threads. It has two main phases (marking and sweeping) that run concurrently with the application. The marking phase identifies live objects, and the sweeping phase reclaims memory occupied by unreachable objects. However, it still has some short “stop - the - world” pauses during critical points in the process, such as at the start and end of the marking and sweeping phases.</li>
<li>Use Case: Suitable for applications that require low - latency and can’t afford long pauses. For example, in a web application where user requests need to be served quickly and a long garbage collection pause could lead to a poor user experience.</li>
</ul>
</li>
<li>G1 (Garbage - First) Garbage Collector:<ul>
<li>Explanation: The G1 garbage collector divides the heap into multiple regions of equal size. It focuses on regions that have the most garbage (hence the name “Garbage - First”). It also tries to balance the pause times by predicting which regions are likely to fill up quickly and prioritizing them for collection. It uses a combination of concurrent and parallel techniques to achieve efficient garbage collection.</li>
<li>Use Case: Ideal for applications with large heaps and where there is a need to balance throughput and pause times. For example, in a data - intensive application that manages a large amount of data in memory and requires both good performance and relatively short pauses to handle incoming requests.</li>
</ul>
</li>
</ul>
</li>
<li><strong>New GC - Related Features in Java 8</strong><ul>
<li>Metaspace: In Java 8, the permanent generation (PermGen) was removed and replaced with metaspace.<ul>
<li>Explanation: PermGen was used to store metadata such as class definitions, method data, and constant pool information. It had a fixed - size limit and was a common source of memory - related issues, such as <code>OutOfMemoryError</code> due to the inability to load more classes. Metaspace, on the other hand, is a native memory area. It can grow and shrink dynamically, which reduces the likelihood of running out of memory due to class - loading - related issues. The garbage collection of metaspace is more efficient as it uses the same collectors as the heap (e.g., G1 can manage metaspace regions).</li>
<li>Benefit: This change provides more flexibility in handling class - loading and metadata storage, making it easier to manage large - scale applications that load a large number of classes. For example, in a Java EE application server that deploys many applications and loads numerous classes, the metaspace allows for more efficient use of memory and better handling of class - unloading scenarios.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="363-Callable-vs-Runnable"><a href="#363-Callable-vs-Runnable" class="headerlink" title="363-Callable vs Runnable"></a>363-Callable vs Runnable</h1><p>In Java, both <code>Runnable</code> and <code>Callable</code> are used to represent tasks that can be executed concurrently, usually in the context of multi - threading, but they have several differences:</p>
<ul>
<li><ol>
<li>Return Value<ul>
<li>Runnable:<ul>
<li>A <code>Runnable</code> interface does not have a return value. The <code>run</code> method of the <code>Runnable</code> interface has a <code>void</code> return type. Its purpose is mainly to encapsulate a block of code that needs to be executed, such as a task that performs a simple operation like printing a message or updating a counter.</li>
<li>For example, consider the following <code>Runnable</code> implementation:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"This is a Runnable task."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li>Callable:<ul>
<li>A <code>Callable</code> interface is designed to return a result. The <code>call</code> method of the <code>Callable</code> interface has a generic return type (<code>&lt;V&gt;</code>). The actual type of the return value is specified when the <code>Callable</code> is implemented.</li>
<li>For example, here is a simple <code>Callable</code> implementation that returns an integer:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCallable</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">42</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><ol>
<li>Exception Handling<ul>
<li>Runnable:<ul>
<li>The <code>run</code> method of the <code>Runnable</code> interface does not throw checked exceptions. Any checked exceptions that occur within the <code>run</code> method must be caught and handled inside the <code>run</code> method. If an unchecked exception (such as a <code>RuntimeException</code>) is thrown, it will cause the thread executing the <code>Runnable</code> to terminate abnormally.</li>
<li>For example, if you try to access a file that doesn’t exist inside the <code>run</code> method and you don’t handle the <code>FileNotFoundException</code> (a checked exception), it will result in a compilation error.</li>
</ul>
</li>
<li>Callable:<ul>
<li>The <code>call</code> method of the <code>Callable</code> interface can throw checked exceptions. This allows for more flexible error - handling mechanisms. The exceptions thrown from the <code>call</code> method can be propagated to the calling code and handled appropriately.</li>
<li>For example, if the <code>call</code> method is performing a network operation and a <code>SocketException</code> (a checked exception) occurs, it can be thrown and caught in the code that submitted the <code>Callable</code> task.</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li><ol>
<li><p>Usage with Executor Framework</p>
<ul>
<li><p>Runnable:</p>
<ul>
<li><code>Runnable</code> is often used with the <code>ExecutorService</code>‘s <code>execute</code> method. When you use the <code>execute</code> method to submit a <code>Runnable</code> task, the <code>ExecutorService</code> will execute the <code>run</code> method of the <code>Runnable</code> in a separate thread (or reuse an existing thread from a thread pool).</li>
<li>For example:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RunnableExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ExecutorService executor = Executors.newSingleThreadExecutor();</span><br><span class="line">        Runnable task = <span class="keyword">new</span> MyRunnable();</span><br><span class="line">        executor.execute(task);</span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Callable:</p>
<ul>
<li><code>Callable</code> is used with the <code>ExecutorService</code>‘s <code>submit</code> method. When you submit a <code>Callable</code> task using the <code>submit</code> method, the <code>ExecutorService</code> returns a <code>Future</code> object. The <code>Future</code> object can be used to retrieve the result of the <code>Callable</code> task (using the <code>get</code> method) and to manage the state of the task (such as checking if the task is done, canceling the task, etc.).</li>
<li>For example:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Future;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CallableExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ExecutorService executor = Executors.newSingleThreadExecutor();</span><br><span class="line">        Callable&lt;Integer&gt; task = <span class="keyword">new</span> MyCallable();</span><br><span class="line">        Future&lt;Integer&gt; future = executor.submit(task);</span><br><span class="line">        System.out.println(<span class="string">"The result is: "</span> + future.get());</span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="375-Difference-between-Iterator-and-Enumeration"><a href="#375-Difference-between-Iterator-and-Enumeration" class="headerlink" title="375-Difference between Iterator and Enumeration"></a>375-Difference between Iterator and Enumeration</h1><ul>
<li>Both use to loop java collections.</li>
<li>Iterator: can remove elements when iterator.  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line">    <span class="keyword">import</span> java.util.Iterator;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IteratorRemoveExample</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            list.add(<span class="number">1</span>);</span><br><span class="line">            list.add(<span class="number">2</span>);</span><br><span class="line">            list.add(<span class="number">3</span>);</span><br><span class="line">            Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line">            <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">                <span class="keyword">int</span> element = iterator.next();</span><br><span class="line">                <span class="keyword">if</span> (element % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    iterator.remove();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(list);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">- Enumeration: cannot remove elements.</span><br><span class="line">    ```java</span><br><span class="line">    <span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line">    <span class="keyword">import</span> java.util.Vector;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumerationExample</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            Vector&lt;String&gt; vector = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">            vector.add(<span class="string">"Apple"</span>);</span><br><span class="line">            vector.add(<span class="string">"Banana"</span>);</span><br><span class="line">            Enumeration&lt;String&gt; enumeration = vector.elements();</span><br><span class="line">            <span class="keyword">while</span> (enumeration.hasMoreElements()) &#123;</span><br><span class="line">                System.out.println(enumeration.nextElement());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="52-131-When-implements-Serializable-what-if-you-don’t-define-the-serialVersionUID-What-if-you-remove-it"><a href="#52-131-When-implements-Serializable-what-if-you-don’t-define-the-serialVersionUID-What-if-you-remove-it" class="headerlink" title="52-131-When implements Serializable, what if you don’t define the serialVersionUID? What if you remove it?"></a>52-131-When implements Serializable, what if you don’t define the serialVersionUID? What if you remove it?</h1><h2 id="What-is-serialVersionUID"><a href="#What-is-serialVersionUID" class="headerlink" title="What is serialVersionUID?"></a>What is <code>serialVersionUID</code>?</h2><ul>
<li><code>serialVersionUID</code> is a unique identifier for a serializable class. It is used during deserialization to ensure that the sender and receiver of a serialized object have compatible versions of that class. It is stored as a <code>long</code> value in the serialized object.</li>
</ul>
<h2 id="When-you-don’t-define-serialVersionUID"><a href="#When-you-don’t-define-serialVersionUID" class="headerlink" title="When you don’t define serialVersionUID"></a>When you don’t define <code>serialVersionUID</code></h2><ul>
<li><p><strong>Behavior</strong>:</p>
<ul>
<li>If you do not explicitly define a <code>serialVersionUID</code> in your serializable class, the Java runtime will automatically generate one for you at runtime based on various aspects of the class, such as the fields, methods, and other characteristics of the class.</li>
<li>This auto-generated <code>serialVersionUID</code> is computed using a complex algorithm that takes into account the class name, the interfaces it implements, and other factors.</li>
</ul>
</li>
<li><p><strong>Implications</strong>:</p>
<ul>
<li><strong>Compatibility issues</strong>: Any change in the class structure (e.g., adding or removing fields, changing the type of a field, or modifying methods) will cause the runtime to generate a different <code>serialVersionUID</code>. This means that if you serialize an object with one version of the class and then try to deserialize it with a modified version of the class, the deserialization will fail with an <code>InvalidClassException</code>.</li>
<li><p><strong>Example</strong>: Consider the following serializable class:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>If you serialize an object of <code>MyClass</code> in one version of your application, and then you modify the <code>MyClass</code> by adding a new field, like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Then, when you try to deserialize the previously serialized object, you will get an <code>InvalidClassException</code> because the auto-generated <code>serialVersionUID</code> has changed.</p>
</li>
</ul>
</li>
</ul>
<h2 id="When-you-remove-serialVersionUID"><a href="#When-you-remove-serialVersionUID" class="headerlink" title="When you remove serialVersionUID"></a>When you remove <code>serialVersionUID</code></h2><ul>
<li><strong>Behavior</strong>:<ul>
<li>If you initially define a <code>serialVersionUID</code> and then remove it from your class, the Java runtime will again generate a new one based on the current state of the class.</li>
</ul>
</li>
<li><p><strong>Implications</strong>:</p>
<ul>
<li><strong>Compatibility issues</strong>: Similar to not defining it initially, removing the <code>serialVersionUID</code> can lead to deserialization failures. If you have serialized objects using the old version of the class with a defined <code>serialVersionUID</code> and then remove it, the deserialization process will try to use the auto-generated <code>serialVersionUID</code>, which is likely to be different from the original one, resulting in an <code>InvalidClassException</code>.</li>
<li><p><strong>Example</strong>: Consider this class with a defined <code>serialVersionUID</code>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">123456789L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>If you serialize objects with this version of <code>MyClass</code>, and then you remove the <code>serialVersionUID</code> from the class like this:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>When you try to deserialize the previously serialized objects, you will face <code>InvalidClassException</code> as the deserialization process will use the new auto-generated <code>serialVersionUID</code> which will not match the old one.</p>
</li>
</ul>
</li>
</ul>
<h2 id="Best-Practices-3"><a href="#Best-Practices-3" class="headerlink" title="Best Practices"></a>Best Practices</h2><ul>
<li><p><strong>Explicitly define <code>serialVersionUID</code></strong>:</p>
<ul>
<li>It is generally recommended to explicitly define <code>serialVersionUID</code> in your serializable classes. This way, you have more control over versioning. You can decide when a change in the class should break compatibility and when it should not.</li>
<li><p><strong>Example</strong>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">123456789L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>If you later modify the class by adding a new field but decide that it should still be compatible with the previously serialized objects, you can keep the <code>serialVersionUID</code> the same. However, if you decide that the changes are significant enough to break compatibility, you can change the <code>serialVersionUID</code>.</p>
</li>
</ul>
</li>
</ul>
<h2 id="Serialization-and-Deserialization-Example"><a href="#Serialization-and-Deserialization-Example" class="headerlink" title="Serialization and Deserialization Example"></a>Serialization and Deserialization Example</h2><ul>
<li><p>Here is a simple example of serializing and deserializing an object:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">123456789L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyClass</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SerializationExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyClass obj = <span class="keyword">new</span> MyClass(<span class="number">42</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Serialization</span></span><br><span class="line">            FileOutputStream fileOut = <span class="keyword">new</span> FileOutputStream(<span class="string">"object.ser"</span>);</span><br><span class="line">            ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(fileOut);</span><br><span class="line">            out.writeObject(obj);</span><br><span class="line">            out.close();</span><br><span class="line">            fileOut.close();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Deserialization</span></span><br><span class="line">            FileInputStream fileIn = <span class="keyword">new</span> FileInputStream(<span class="string">"object.ser"</span>);</span><br><span class="line">            ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream(fileIn);</span><br><span class="line">            MyClass deserializedObj = (MyClass) in.readObject();</span><br><span class="line">            in.close();</span><br><span class="line">            fileIn.close();</span><br><span class="line">            System.out.println(deserializedObj.getValue());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>In this example, the <code>MyClass</code> object is serialized to a file and then deserialized. If you change the <code>MyClass</code> and want to maintain compatibility, you should keep the <code>serialVersionUID</code> constant. If you want to break compatibility, change the <code>serialVersionUID</code>.</p>
</li>
</ul>
<h1 id="372-What-is-externalization-and-its-difference-with-serialization"><a href="#372-What-is-externalization-and-its-difference-with-serialization" class="headerlink" title="372-What is externalization and its difference with serialization"></a>372-What is externalization and its difference with serialization</h1><ol>
<li><p><strong>Serialization</strong></p>
<ul>
<li>Definition: Serialization is the process of converting an object’s state into a byte stream so that it can be persisted (saved to a file, sent over a network, etc.) and later reconstructed (deserialized) to an object with the same state. In Java, the <code>java.io.Serializable</code> interface is used to mark a class as serializable. When an object of a serializable class is serialized, the JVM takes care of writing the object’s state to a stream.</li>
<li><p>Example: Consider a simple <code>Person</code> class.</p>
   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">// Constructor, getters, and setters</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>How it works: When you want to serialize an object of the <code>Person</code> class, you can use <code>ObjectOutputStream</code>. For example:</p>
   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SerializationExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person(<span class="string">"John"</span>, <span class="number">30</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            FileOutputStream fileOut = <span class="keyword">new</span> FileOutputStream(<span class="string">"person.ser"</span>);</span><br><span class="line">            ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(fileOut);</span><br><span class="line">            out.writeObject(person);</span><br><span class="line">            out.close();</span><br><span class="line">            fileOut.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Limitations: The serialization process is automatic and uses the default behavior provided by the JVM. This can lead to inefficiencies and security risks. For example, sensitive data might be serialized and transferred without proper handling. Also, if the class structure changes (e.g., a new field is added), deserialization of the previously serialized objects might cause issues.</p>
</li>
</ul>
</li>
<li><p><strong>Externalization</strong></p>
<ul>
<li>Definition: Externalization is a more controlled way of handling object persistence. A class that wants to use externalization must implement the <code>java.io.Externalizable</code> interface. This interface has two methods: <code>writeExternal</code> and <code>readExternal</code>. The programmer is responsible for explicitly writing and reading the object’s state to and from an <code>ObjectOutput</code> and <code>ObjectInput</code> stream.</li>
<li><p>Example: Let’s modify the <code>Person</code> class to use externalization.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Externalizable;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInput;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutput;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Externalizable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Required for externalization</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeExternal</span><span class="params">(ObjectOutput out)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        out.writeUTF(name);</span><br><span class="line">        out.writeInt(age);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readExternal</span><span class="params">(ObjectInput in)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        name = in.readUTF();</span><br><span class="line">        age = in.readInt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>How it works: When you want to externalize an object of the <code>Person</code> class, you can use <code>ObjectOutputStream</code> and <code>ObjectInputStream</code> similar to serialization, but the object’s state is written and read using the custom methods <code>writeExternal</code> and <code>readExternal</code>. For example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExternalizationExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person(<span class="string">"Alice"</span>, <span class="number">25</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Writing the object</span></span><br><span class="line">            FileOutputStream fileOut = <span class="keyword">new</span> FileOutputStream(<span class="string">"person.external"</span>);</span><br><span class="line">            ObjectOutputStream out = <span class="keyword">new</span> ObjectOutputStream(fileOut);</span><br><span class="line">            out.writeObject(person);</span><br><span class="line">            out.close();</span><br><span class="line">            fileOut.close();</span><br><span class="line">            <span class="comment">// Reading the object</span></span><br><span class="line">            FileInputStream fileIn = <span class="keyword">new</span> FileInputStream(<span class="string">"person.external"</span>);</span><br><span class="line">            ObjectInputStream in = <span class="keyword">new</span> ObjectInputStream(fileIn);</span><br><span class="line">            Person restoredPerson = (Person) in.readObject();</span><br><span class="line">            in.close();</span><br><span class="line">            fileIn.close();</span><br><span class="line">            System.out.println(restoredPerson.getName() + <span class="string">" "</span> + restoredPerson.getAge());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>Differences</strong></p>
<ul>
<li>Control:<ul>
<li>Serialization: The process is mostly automatic. The JVM takes care of writing the object’s non - transient fields to the stream. The programmer has limited control over what is serialized.</li>
<li>Externalization: The programmer has full control. You decide exactly what data to write and read, and in what format. This allows for more efficient and customized persistence.</li>
</ul>
</li>
<li>Constructor Requirement:<ul>
<li>Serialization: The default constructor is not required. The JVM can reconstruct the object using the serialized data.</li>
<li>Externalization: A public no - argument constructor is required. This constructor is used during the deserialization process (reading the object’s state).</li>
</ul>
</li>
<li>Performance and Flexibility:<ul>
<li>Serialization: It’s a convenient option when you don’t need a high level of control. But it might serialize more data than necessary and can be less efficient in terms of space and time.</li>
<li>Externalization: It’s more flexible and can lead to better performance if implemented correctly. You can choose to serialize only the essential data and in a more optimized way.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="75-Different-types-of-“method-reference”"><a href="#75-Different-types-of-“method-reference”" class="headerlink" title="75-Different types of “method reference”"></a>75-Different types of “method reference”</h1><p>In Java 8, there are four types of method references:</p>
<h2 id="Static-Method-Reference"><a href="#Static-Method-Reference" class="headerlink" title="Static Method Reference"></a>Static Method Reference</h2><ul>
<li>Explanation: A static method reference refers to a static method of a class. The syntax is <code>ClassName::staticMethodName</code>. The method reference can be used as a replacement for a lambda expression that calls a static method.</li>
<li><p>Example: Consider a utility class <code>MathUtils</code> with a static method <code>add</code> that takes two integers and returns their sum.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MathUtils</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  You can use a static method reference with the <code>BinaryOperator</code> interface. The <code>BinaryOperator</code> interface represents an operation that takes two operands of the same type and returns a result of that type.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.BinaryOperator;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticMethodReferenceExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BinaryOperator&lt;Integer&gt; adder = MathUtils::add;</span><br><span class="line">        <span class="keyword">int</span> result = adder.apply(<span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line">        System.out.println(result); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  Here, <code>MathUtils::add</code> is a static method reference that is assigned to the <code>adder</code> variable of type <code>BinaryOperator&lt;Integer&gt;</code>. The <code>apply</code> method of <code>adder</code> then calls the <code>add</code> method of the <code>MathUtils</code> class.</p>
</li>
</ul>
<h2 id="Instance-Method-Reference-of-a-Particular-Object"><a href="#Instance-Method-Reference-of-a-Particular-Object" class="headerlink" title="Instance Method Reference of a Particular Object"></a>Instance Method Reference of a Particular Object</h2><ul>
<li>Explanation: This type of method reference refers to an instance method of a particular object. The syntax is <code>objectReference::instanceMethodName</code>. It’s used when you have an existing object and want to refer to one of its methods.</li>
<li><p>Example: Consider a <code>String</code> object and its <code>length</code> method.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.Function;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InstanceMethodReferenceExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str = <span class="string">"Hello"</span>;</span><br><span class="line">        Function&lt;String, Integer&gt; stringLengthFunction = str::length;</span><br><span class="line">        <span class="keyword">int</span> length = stringLengthFunction.apply(str);</span><br><span class="line">        System.out.println(length); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  Here, <code>str::length</code> is an instance method reference of the <code>str</code> object. The <code>Function&lt;String, Integer&gt;</code> interface’s <code>apply</code> method calls the <code>length</code> method of the <code>str</code> object.</p>
</li>
</ul>
<h2 id="Instance-Method-Reference-to-an-Instance-Method-of-an-Arbitrary-Object-of-a-Particular-Type"><a href="#Instance-Method-Reference-to-an-Instance-Method-of-an-Arbitrary-Object-of-a-Particular-Type" class="headerlink" title="Instance Method Reference to an Instance Method of an Arbitrary Object of a Particular Type"></a>Instance Method Reference to an Instance Method of an Arbitrary Object of a Particular Type</h2><ul>
<li>Explanation: The syntax is <code>ClassName::instanceMethodName</code>. This is used when the method being referred to is an instance method, and the actual object on which the method will be called will be determined later. The method reference provides the method signature, and the object is provided when the function is actually executed.</li>
<li><p>Example: Consider the <code>compareTo</code> method of the <code>String</code> class.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArbitraryObjectMethodReferenceExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] strings = &#123;<span class="string">"apple"</span>, <span class="string">"banana"</span>, <span class="string">"cherry"</span>&#125;;</span><br><span class="line">        Arrays.sort(strings, String::compareTo);</span><br><span class="line">        System.out.println(Arrays.toString(strings)); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  Here, <code>String::compareTo</code> is an instance method reference to the <code>compareTo</code> method of the <code>String</code> class. The <code>Arrays.sort</code> method uses this reference to compare the strings and sort them.</p>
</li>
</ul>
<h2 id="Constructor-Reference"><a href="#Constructor-Reference" class="headerlink" title="Constructor Reference"></a>Constructor Reference</h2><ul>
<li>Explanation: A constructor reference refers to a constructor of a class. The syntax is <code>ClassName::new</code>. It’s used to create new objects of a particular class. Constructor references are useful when you want to use a constructor as a method reference, for example, in factory methods or when populating collections with new objects.</li>
<li><p>Example: Consider a simple <code>Person</code> class with a constructor that takes a <code>String</code> name.</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  You can use a constructor reference with a <code>Supplier</code> interface (which represents a function that supplies a result).</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.Supplier;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstructorReferenceExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Supplier&lt;Person&gt; personSupplier = Person::<span class="keyword">new</span>;</span><br><span class="line">        Person person = personSupplier.get();</span><br><span class="line">        person = personSupplier.get(<span class="string">"John"</span>);</span><br><span class="line">        System.out.println(person.getName()); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  Here, <code>Person::new</code> is a constructor reference. The <code>get</code> method of the <code>Supplier&lt;Person&gt;</code> calls the constructor of the <code>Person</code> class to create a new <code>Person</code> object.</p>
</li>
</ul>

      


      

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/noodle/" rel="tag"><i class="fa fa-tag"></i> noodle</a>
            
              <a href="/tags/NA/" rel="tag"><i class="fa fa-tag"></i> NA</a>
            
              <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
            
          </div>
        

        
        
        

        
          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2024/12/30/eng_youtube_indian_top_view_of_binary_tree/" rel="next" title="YT Indian Accent Top View of Binary Tree">
                  <i class="fa fa-chevron-left"></i> 
                  <p class="post-nav-pre-next-title">
                    YT Indian Accent Top View of Binary Tree
                  </p> 
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2025/01/18/na_word_list/" rel="prev" title="NA word list">
                <p class="post-nav-pre-next-title">
                    NA word list
                </p> 
                <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        

        
        
      </footer>
      
    </div>
    
    
    

    

    

    

  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  

  <aside id="sidebar" class="sidebar">

    
      
        <div id="sidebar-dimmer"></div>
      
    

    <div class="sidebar-inner">
    
      <div class="sidebar-toggle-inside motion-element">
        <div class="sidebar-toggle-line-wrap">
          <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
          <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
        </div>
      </div>

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a href="/" class="site-author-image" rel="start" style="border:none">
            <img class="site-author-image" itemprop="image" src="/uploads/avatar.png" alt="Wasp">
          </a>
          <p class="site-author-name" itemprop="name">Wasp</p>
           
              <p class="site-description motion-element" itemprop="description">It is recommended to use Chrome/Firefox/Safari to read this blog.</p>
          
        </div>

        <nav class="site-state motion-element">

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">272</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">99</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

          <div class="site-state-item site-state-about">
            <a href="/about/">
              <span class="site-state-item-about fa fa-fw fa-user"></span>
              <span class="site-state-item-name">about</span>
            </a>
          </div>
          
        </nav>

        

        <div class="links-of-author motion-element">
          
          
          <!-- 网易云音乐 -->
            <!-- <div class="netease-cloud-music"> -->
              <!-- <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=110 src="//music.163.com/outchain/player?type=0&id=992743594&auto=0&height=90"></iframe> -->
            <!-- </div> -->
          <!-- 网易云音乐 -->

        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              friendship links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://119.23.17.57" title="ksun的博客" target="_blank">ksun的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://mp.weixin.qq.com/mp/homepage?__biz=MzU3MTUyNzg0NQ==&hid=1&sn=7a3ae61b7af714f75d68e7ae826a2d2c&scene=18#wechat_redirect" title="你有图么我有故事" target="_blank">你有图么我有故事</a>
                </li>
              
            </ul>
          </div>
        

        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">1.</span> <span class="nav-text">Reference</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IDs-Questions-Map"><span class="nav-number">2.</span> <span class="nav-text">IDs Questions Map</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#46-Types-of-Exceptions"><span class="nav-number">3.</span> <span class="nav-text">46-Types of Exceptions</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#43-Abstract-class-vs-Interface"><span class="nav-number">4.</span> <span class="nav-text">43-Abstract class vs. Interface</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#44-New-feature-of-Java-8"><span class="nav-number">5.</span> <span class="nav-text">44-New feature of Java 8</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Lambda-Expressions"><span class="nav-number">5.1.</span> <span class="nav-text">Lambda Expressions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Method-References"><span class="nav-number">5.2.</span> <span class="nav-text">Method References</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Stream-API"><span class="nav-number">5.3.</span> <span class="nav-text">Stream API</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-Class"><span class="nav-number">5.4.</span> <span class="nav-text">Optional Class</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#67-Implement-a-singleton"><span class="nav-number">6.</span> <span class="nav-text">67-Implement a singleton</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#68-364-Executor-Service-and-Future-and-CompletableFuture"><span class="nav-number">7.</span> <span class="nav-text">68-364-Executor Service and Future and CompletableFuture</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Executor-Service"><span class="nav-number">7.1.</span> <span class="nav-text">Executor Service</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Future"><span class="nav-number">7.2.</span> <span class="nav-text">Future</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CompletableFuture"><span class="nav-number">7.3.</span> <span class="nav-text">CompletableFuture</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Key-Differences"><span class="nav-number">7.4.</span> <span class="nav-text">Key Differences</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Best-Practices"><span class="nav-number">7.5.</span> <span class="nav-text">Best Practices</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#70-Factory-Pattern"><span class="nav-number">8.</span> <span class="nav-text">70-Factory Pattern</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#70-Obeserver-Pattern"><span class="nav-number">9.</span> <span class="nav-text">70-Obeserver Pattern</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#448-Proxy-Pattern"><span class="nav-number">10.</span> <span class="nav-text">448-Proxy Pattern</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Structure-of-Proxy-Design-Pattern"><span class="nav-number">10.1.</span> <span class="nav-text">Structure of Proxy Design Pattern</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Use-Cases"><span class="nav-number">10.2.</span> <span class="nav-text">Use Cases</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Benefits"><span class="nav-number">10.3.</span> <span class="nav-text">Benefits</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-of-Usage"><span class="nav-number">10.4.</span> <span class="nav-text">Example of Usage</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#135-map-vs-flatMap"><span class="nav-number">11.</span> <span class="nav-text">135-map vs. flatMap</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#374-Synchronized-Method-vs-Synchronized-block"><span class="nav-number">12.</span> <span class="nav-text">374-Synchronized Method vs Synchronized block</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#106-Thread"><span class="nav-number">13.</span> <span class="nav-text">106-Thread</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#join-Method"><span class="nav-number">13.1.</span> <span class="nav-text">join() Method</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wait-Method"><span class="nav-number">13.2.</span> <span class="nav-text">wait() Method</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sleep-Method"><span class="nav-number">13.3.</span> <span class="nav-text">sleep() Method</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yield-Method"><span class="nav-number">13.4.</span> <span class="nav-text">yield() Method</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#104-How-does-thread-communicate-interact-share-data-with-each-other"><span class="nav-number">13.5.</span> <span class="nav-text">104-How does thread communicate/interact/share data with each other</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Shared-Variables"><span class="nav-number">13.5.1.</span> <span class="nav-text">Shared Variables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Synchronization"><span class="nav-number">13.5.2.</span> <span class="nav-text">Synchronization</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Wait-Notify-and-NotifyAll"><span class="nav-number">13.5.3.</span> <span class="nav-text">Wait, Notify, and NotifyAll</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Thread-Confinement"><span class="nav-number">13.5.4.</span> <span class="nav-text">Thread Confinement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Concurrent-Data-Structures"><span class="nav-number">13.5.5.</span> <span class="nav-text">Using Concurrent Data Structures</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-Locks-and-Condition-Variables"><span class="nav-number">13.5.6.</span> <span class="nav-text">Using Locks and Condition Variables</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#121-373-deadlock"><span class="nav-number">13.6.</span> <span class="nav-text">121-373-deadlock</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Finding-Deadlocks"><span class="nav-number">13.6.1.</span> <span class="nav-text">Finding Deadlocks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Avoiding-Deadlocks"><span class="nav-number">13.6.2.</span> <span class="nav-text">Avoiding Deadlocks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Best-Practices-1"><span class="nav-number">13.6.3.</span> <span class="nav-text">Best Practices</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#118-Relationship-between-equals-and-hashcode"><span class="nav-number">14.</span> <span class="nav-text">118-Relationship between equals() and hashcode()</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Default-Implementation"><span class="nav-number">14.1.</span> <span class="nav-text">Default Implementation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Overriding-equals"><span class="nav-number">14.2.</span> <span class="nav-text">Overriding equals()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hashCode-and-equals"><span class="nav-number">14.3.</span> <span class="nav-text">hashCode() and equals()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rules-for-equals"><span class="nav-number">14.4.</span> <span class="nav-text">Rules for equals()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Using-equals"><span class="nav-number">14.5.</span> <span class="nav-text">Using equals()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#132-What-is-fail-fast-and-fail-safe"><span class="nav-number">15.</span> <span class="nav-text">132-What is fail-fast and fail-safe?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Fail-Fast"><span class="nav-number">15.1.</span> <span class="nav-text">Fail-Fast</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fail-Safe"><span class="nav-number">15.2.</span> <span class="nav-text">Fail-Safe</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Key-Differences-1"><span class="nav-number">15.3.</span> <span class="nav-text">Key Differences</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Best-Practices-2"><span class="nav-number">15.4.</span> <span class="nav-text">Best Practices</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#163-what-is-SOLID-principle"><span class="nav-number">16.</span> <span class="nav-text">163-what is SOLID principle</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#What’s-Garbage-collection-types-and-Whats-new-about-GC-in-java-8"><span class="nav-number">17.</span> <span class="nav-text">What’s Garbage collection types and Whats new about GC in java 8</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#compact-version"><span class="nav-number">17.1.</span> <span class="nav-text">compact version</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#detailed-version"><span class="nav-number">17.2.</span> <span class="nav-text">detailed version</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#363-Callable-vs-Runnable"><span class="nav-number">18.</span> <span class="nav-text">363-Callable vs Runnable</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#375-Difference-between-Iterator-and-Enumeration"><span class="nav-number">19.</span> <span class="nav-text">375-Difference between Iterator and Enumeration</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#52-131-When-implements-Serializable-what-if-you-don’t-define-the-serialVersionUID-What-if-you-remove-it"><span class="nav-number">20.</span> <span class="nav-text">52-131-When implements Serializable, what if you don’t define the serialVersionUID? What if you remove it?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#What-is-serialVersionUID"><span class="nav-number">20.1.</span> <span class="nav-text">What is serialVersionUID?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#When-you-don’t-define-serialVersionUID"><span class="nav-number">20.2.</span> <span class="nav-text">When you don’t define serialVersionUID</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#When-you-remove-serialVersionUID"><span class="nav-number">20.3.</span> <span class="nav-text">When you remove serialVersionUID</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Best-Practices-3"><span class="nav-number">20.4.</span> <span class="nav-text">Best Practices</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Serialization-and-Deserialization-Example"><span class="nav-number">20.5.</span> <span class="nav-text">Serialization and Deserialization Example</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#372-What-is-externalization-and-its-difference-with-serialization"><span class="nav-number">21.</span> <span class="nav-text">372-What is externalization and its difference with serialization</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#75-Different-types-of-“method-reference”"><span class="nav-number">22.</span> <span class="nav-text">75-Different types of “method reference”</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Static-Method-Reference"><span class="nav-number">22.1.</span> <span class="nav-text">Static Method Reference</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Instance-Method-Reference-of-a-Particular-Object"><span class="nav-number">22.2.</span> <span class="nav-text">Instance Method Reference of a Particular Object</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Instance-Method-Reference-to-an-Instance-Method-of-an-Arbitrary-Object-of-a-Particular-Type"><span class="nav-number">22.3.</span> <span class="nav-text">Instance Method Reference to an Instance Method of an Arbitrary Object of a Particular Type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Constructor-Reference"><span class="nav-number">22.4.</span> <span class="nav-text">Constructor Reference</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wasp</span>
</div>



        

        
      </div>
    </footer>

    <!--
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      
        <span id="scrollpercent"><span>0</span>%</span>
      
    </div>
    -->

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/dist/jquery.fancybox.js?v=3.2.10"></script>


  




  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>


  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

  <script type="text/javascript">

    var is_load_xml_finished = 0;

    var searchFunc = function (path, search_id, content_id) {
      // 0x00. environment initialization
      'use strict';

      var $input = document.getElementById(search_id);
      var $resultContent = document.getElementById(content_id);
      // var datas = [];

      /* loading css1 : Dot Css Loader*/
      var DotLoader = "<div class='loader'>Loading...</div>";

      /* loading css2 : Pure Css Loader - Square */
      var SquareLoader = 
        "<div class='loader'>" +
          "<div class='square' ></div>" +
          "<div class='square'></div>" +
          "<div class='square last'></div>" +
          "<div class='square clear'></div>" +
          "<div class='square'></div>" +
          "<div class='square last'></div>" +
          "<div class='square clear'></div>" +
          "<div class='square '></div>" +
          "<div class='square last'></div>" +
        "</div>";

      var ProgressBar = 
          "<div class='progress-bar'>" +
            "<div class='progress-bar-charge'></div>" +
          "</div>";

      var str = "";
      var keywords = [];
      var temp_keyword = "";

      // 是否为第一个字母被键入的标志位
      var first_char_flag = 0;

      // 因为在移动设备上, 点击搜索之后会 scroll 到页面顶部, 所以需要记录之前的页面x, y坐标值, 以便于搜索完点击 close 按钮之后 scroll 回原来的页面坐标值.
      var last_page_x = 0;
      var last_page_y = 0;

      var local_search_tips = 
            "<span class='local-search-empty'>" + "第一次搜索可能较慢, 先思考一个经典算法问题, 跳台阶:" + "</span>" +
            "<span class='local-search-empty'>" + "一只青蛙一次可以跳上1级台阶，也可以跳上2级。求该青蛙跳上一个6级的台阶总共有多少种跳法?n级呢?" + "</span>";

      function CloseLocalSearch()
      {
        first_char_flag = 0;

        $('#local-search-input').val('');
        $('#local-search-close').hide();

        // $('.local-search-result-cls ul li').velocity('stop').velocity('transition.slideDownOut', 200);

        $('#' + content_id).attr("headroom_special_attr","true"); 
        
        if (isMobile())
        {
          // $('body').scrollTop(last_page_y);  // scrollTop 有兼容性问题
              scrollTo(last_page_x, last_page_y);

          $('#' + content_id).hide();
        }
        else
        {
          $('#' + content_id).velocity('stop').velocity( 'transition.bounceOut', 800);
          // $('#' + content_id).velocity('stop').velocity( 'transition.slideUpBigOut', 1000);
          // $('#' + content_id).velocity('stop').velocity( 'transition.bounceUpOut', 1000);
          // $('#' + content_id).velocity('stop').velocity( 'transition.expandOut', 600);
          // $('#' + content_id).velocity('stop').velocity( 'transition.whirlOut', 600);
          // $('#' + content_id).velocity('stop').velocity( 'transition.shrinkOut', 600);
          // $('#' + content_id).velocity('stop').velocity( 'transition.swoopOut', 1000);
          // $('#' + content_id).velocity('stop').velocity( 'transition.flipBounceXOut', 600);
          // $('#' + content_id).velocity('stop').velocity( 'transition.fadeOut', 600);
        }

        // $('#' + content_id).velocity('stop').velocity( isMobile() ? 'transition.fadeOut' : 'transition.bounceUpOut', {
        //   // delay: isMobile() ? 50 : 0,
        //   duration: isMobile() ? 500 : 200,
        //   // begin: function() { 
        //   //   if (isMobile())
        //   //   {
        //   //     $('body').scrollTop(last_page_y);
        //   //   } 
        //   // }
        //   complete: function () {
        //     if (isMobile())
        //     {
        //       if (last_page_y < 20000)
        //       {
        //         $('body').velocity('scroll', { offset: last_page_y+"px", duration: last_page_y < 10000 ? 1000 : 2000 });
        //       }
        //       else
        //       {
        //         $('body').scrollTop(last_page_y);
        //       }
        //       // $('body').velocity('scroll');

        //       // $('html,body').animate({
        //       //   scrollTop: last_page_y
        //       // },400);
        //       // $('body').velocity('transition.slideDownIn', 1000);
        //       // $('body').velocity('scroll', { offset: last_page_y+"px", duration: document.body.scrollHeight < 20000 ? 1500 : 3000 });
        //     }
        //   }
        // });
      }

      function handleSearch()
      {
        if (keywords.length <= 0) {
          return;
        }
        $resultContent.innerHTML = "";
        $('#local-search-close').show();

        // 0x04. perform local searching
        if (is_load_xml_finished == 0)
        {
          $resultContent.innerHTML = 
            "<ul class='local-search-empty-ul'>" + 
            local_search_tips +
            ProgressBar;
        }
        else
        {
          // Retrieve the object from local storage
          var xml_resp = retrieve_search_xml()

          xml_resp.forEach(function (data) {
          // datas.forEach(function (data) {
            var isMatch = true;
            var content_index = [];
            if (!data.title || data.title.trim() === '') {
              data.title = "Untitled";
            }
            var is_encrypted = data.encrypted.trim() == '1'
            var is_sensitive = CONFIG.local_search.sensitive_word && data_content.indexOf(CONFIG.local_search.sensitive_word) >= 0
            var orig_data_title = data.title.trim();
            var data_title = orig_data_title.toLowerCase();
            var orig_data_content = data.content.trim().replace(/<[^>]+>/g, "");
            var data_content = orig_data_content.toLowerCase();
            var data_url = decodeURIComponent(data.url);
            var index_title = -1;
            var index_content = -1;
            var first_occur = -1;
            // only match artiles with not empty contents
            if (data_content !== '') {
              keywords.forEach(function (keyword, i) {
                index_title = data_title.indexOf(keyword);
                index_content = (is_sensitive || is_encrypted) ? -1 : data_content.indexOf(keyword);

                if (index_title < 0 && index_content < 0) {
                  isMatch = false;
                } else {
                  if (index_content < 0) {
                    index_content = 0;
                  }
                  if (i == 0) {
                    first_occur = index_content;
                  }
                  // content_index.push({index_content:index_content, keyword_len:keyword_len});
                }
              });
            } else {
              isMatch = false;
            }
            // 0x05. show search results
            if (isMatch) {
              var content = orig_data_content;
              if (first_occur >= 0) {
                var match_content = "";
                if (!is_sensitive && !is_encrypted)
                {
                  // cut out 100 characters
                  var start = first_occur - 20;
                  var end = first_occur + 80;

                  if (start < 0) {
                    start = 0;
                  }

                  if (start == 0) {
                    end = 100;
                  }

                  if (end > content.length) {
                    end = content.length;
                  }

                  match_content = content.substr(start, end);
                }

                // highlight all keywords
                var regS = "";
                if (match_content != "")
                {
                  keywords.forEach(function (keyword) {
                    regS = new RegExp(keyword, "gi");
                    match_content = match_content.replace(regS, "<b class=\"search-keyword\">" + keyword + "</b>");
                    orig_data_title = orig_data_title.replace(regS, "<b class=\"search-keyword\">" + keyword + "</b>");
                  });
                }
                else
                {
                  keywords.forEach(function (keyword) {
                    regS = new RegExp(keyword, "gi");
                    orig_data_title = orig_data_title.replace(regS, "<b class=\"search-keyword\">" + keyword + "</b>");
                  });
                }
                str += "<li><a href='" + data_url + "' class='search-result-title' target='_blank'>" + orig_data_title + "</a>";
                str += "<p class=\"search-result\">" + match_content + "...</p>"
              }
              str += "</li>";
            }
          });

          str += "</ul>";
          if (str.indexOf('<li>') === -1) {
            return $resultContent.innerHTML = 
              "<ul class='local-search-empty-ul'><span class='local-search-empty'>找不到, 换个搜索关键字试一哈.<span></ul>";
          }
          $resultContent.innerHTML = str;
        }
      }

      $input.addEventListener('input', function () {
        // 0x03. parse query to keywords list
        str = '<ul class=\"search-result-list\">';
        temp_keyword = this.value.trim();
        if (temp_keyword.length <= 0) {
          CloseLocalSearch();
          return;
        }

        keywords = temp_keyword.toLowerCase().split(/[\s\-]+/);
        handleSearch();

        // 当用户键入第一个字母的时候的动画处理逻辑 : 
        // 当 first_char_flag 为 0 的时候, 
        // 要播放一个动画
        if (first_char_flag == 0)
        {
            // $('body').scrollTop(0);
          if (isMobile())
          {
            last_page_x = window.pageXOffset;
            last_page_y = window.pageYOffset;
            // $('body').scrollTop(0);
            scrollTo(0,0);

          }
          first_char_flag = 1;
          $('#' + content_id).removeAttr("headroom_special_attr");

          if (isMobile()) {
            $('#' + content_id).velocity('stop').velocity('transition.slideDownIn', 600);
          } else {
                $('#' + content_id).velocity('stop').velocity('transition.bounceIn', 800);
              //   $('.local-search-result-cls ul li').velocity('stop').velocity('transition.bounceUpIn', 1200);
          }
          $('.local-search-result-cls ul li').velocity('stop').velocity('transition.slideDownBigIn', 1000);
        }
      });


      var local_search_xml_data = localStorage.getItem('local_search_xml_data');
      if (!local_search_xml_data) {
        $.ajax({
          // 0x01. load xml file
          url: path,
          dataType: "xml",
          success: function (xmlResponse) {
            store_search_xml(xmlResponse);

            // setTimeout(function(){
            //   is_load_xml_finished = 1;

            //   handleSearch();
            //   $('.local-search-result-cls ul li').velocity('stop').velocity('transition.slideDownIn', 800);
            // }, 2000);
            
            // is_load_xml_finished = 1;

            handleSearch();
            $('.local-search-result-cls ul li').velocity('stop').velocity('transition.swoopIn', 1200);
          }
        });
      }

      $(document).on('click', '#local-search-close', function() {
        CloseLocalSearch();
      });

      $(document).keyup(function(event){
        switch(event.keyCode) {
          case 27:
            // alert("ESC");
            CloseLocalSearch();
        }
      });

      // $(document).on('blur', '#local-search-input', function(e) {
      //   // console.log(document.activeElement.getAttribute('class'));
        
      //   if (isMobile() == false)
      //   {
      //     CloseLocalSearch();
      //   }
      // });
    }

    function isMobile() {
      // console.log(document.body.clientWidth);
      return document.body.clientWidth < 768

      // var userAgent = window.navigator.userAgent;

      // var isiPad = userAgent.match(/iPad/i) !== null;
      // var mobileUA = [
      //   'iphone', 'android', 'phone', 'mobile',
      //   'wap', 'netfront', 'x11', 'java', 'opera mobi',
      //   'opera mini', 'ucweb', 'windows ce', 'symbian',
      //   'symbianos', 'series', 'webos', 'sony',
      //   'blackberry', 'dopod', 'nokia', 'samsung',
      //   'palmsource', 'xda', 'pieplus', 'meizu',
      //   'midp' ,'cldc' , 'motorola', 'foma',
      //   'docomo', 'up.browser', 'up.link', 'blazer',
      //   'helio', 'hosin', 'huawei', 'novarra',
      //   'coolpad', 'webos', 'techfaith', 'palmsource',
      //   'alcatel', 'amoi', 'ktouch', 'nexian',
      //   'ericsson', 'philips', 'sagem', 'wellcom',
      //   'bunjalloo', 'maui', 'smartphone', 'iemobile',
      //   'spice', 'bird', 'zte-', 'longcos',
      //   'pantech', 'gionee', 'portalmmm', 'jig browser',
      //   'hiptop', 'benq', 'haier', '^lct',
      //   '320x320', '240x320', '176x220'
      // ];
      // var pattern = new RegExp(mobileUA.join('|'), 'i');

      // return !isiPad && userAgent.match(pattern);
    }

    function store_search_xml(xmlResponse) {
        datas = $("entry", xmlResponse).map(function () {
          return {
            title: $("title", this).text(),
            content: $("content", this).text(),
            url: $("url", this).text(),
            encrypted: $("encrypted", this).text(),
          };
        }).get();
        // Put the object into storage
        localStorage.setItem('local_search_xml_data', JSON.stringify(datas));
        is_load_xml_finished = 1;

        console.log("store search.xml finished.");
    }

    function ajax_store_search_xml() {
      $.ajax({
        url: "/search.xml",
        dataType: "xml",
        success: function (xmlResponse) {
            store_search_xml(xmlResponse);
        }
      });
    }

    function retrieve_search_xml() {
        // Retrieve the object from local storage
        var retrievedObject = localStorage.getItem('local_search_xml_data');
        var xml_resp = JSON.parse(retrievedObject)
        return xml_resp
    }

    var getSearchFile = function(){
      var path = "/search.xml";
      var local_search_result_name = isMobile() ? "local-search-result-mobile" : "local-search-result-pc";
      searchFunc(path, 'local-search-input', local_search_result_name);
    }

    var local_search_xml_data = localStorage.getItem('local_search_xml_data');
    if (local_search_xml_data) {
      is_load_xml_finished = 1;
      console.log("load search.xml finished.");
    }
    var last_use_local_search_date = localStorage.getItem('last_use_local_search_date');
    var curDate = new Date();
    // 只有在 localStorage 没有 search.xml数据或者 距离上次使用local search已经超过一天了才去取search.xml
    // 节省流量
    if (last_use_local_search_date != curDate.getDate() || !local_search_xml_data) {
      // preload search.xml
      ajax_store_search_xml();
    }

    localStorage.setItem('last_use_local_search_date', curDate.getDate());
    

  </script>





  

  

  

  

  

  


  <script type="text/javascript" src="/lib/wobble_window/wobblewindow.js"> </script>
<script type="text/javascript" src="/js/src/custom.js"></script>
</body>
</html>


<!-- 页面点击小红心 -->





<script type="text/javascript" src="/js/src/headroom.js"></script> 

<!-- 代码块复制功能 -->
<script type="text/javascript" src="/js/src/clipboard-use.js"></script>
